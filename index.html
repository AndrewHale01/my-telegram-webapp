<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Telegram WebApp</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZN665FNYF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TZN665FNYF');
  </script>
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      padding-bottom: 60px;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      position: relative;
    }
    .lang-btn {
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 0px;
    }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00bfae;
      cursor: pointer;
      object-fit: cover;
      background: #111;
      transition: box-shadow 0.2s;
    }
    .avatar-small:hover {
      box-shadow: 0 0 0 4px #00bfae55;
    }
    .popup {
      display: none;
      position: absolute;
      top: 60px;
      right: 0;
      background: #333;
      padding: 24px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 10;
      flex-direction: column;
      min-width: 260px;
      align-items: center;
      animation: fadeIn 0.2s;
    }
    .popup.active {
      display: flex;
    }
    .register-btn, .done-btn, .create-team-btn {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin: 8px 0;
      transition: background 0.2s;
      width: 100%;
      max-width: 220px;
    }
    .register-btn:hover, .done-btn:hover, .create-team-btn:hover {
      background: #1976d2;
    }
    .profile-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 220px;
      margin-top: 8px;
    }
    .profile-form label {
      font-size: 0.95rem;
      color: #bbb;
      margin-bottom: 2px;
    }
    .profile-form input {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 100%;
    }
    .profile-form input[readonly] {
      background: #222;
      color: #aaa;
      border: 1px solid #444;
    }
    .success-message {
      color: #00bfae;
      font-size: 1rem;
      margin: 10px 0 0 0;
      text-align: center;
    }
    .player-profile {
      width: 100%;
      max-width: 220px;
      margin-top: 8px;
      margin-bottom: 8px;
      background: #222;
      border-radius: 10px;
      padding: 12px 14px;
      color: #fff;
      font-size: 1rem;
      box-sizing: border-box;
      display: none;
    }
    .player-profile-title {
      margin-bottom: 8px;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.05rem;
    }
    .player-profile-row {
      margin-bottom: 4px;
      word-break: break-word;
    }
    .lang-option {
      background: #444;
      color: #fff;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 5px;
    }
    .lang-option:hover {
      background: #555;
    }
    #langPopup {
      left: 0;
      right: auto;
    }
    .main-section, .rules-section, .awards-section, .support-section {
      display: none;
      padding: 0 16px;
    }
    .main-section.active, .rules-section.active, .awards-section.active, .support-section.active {
      display: block;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
    .nav-item.active, .nav-item:hover {
      color: #00bfae;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }
    .news-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .news-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .news-list {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding-bottom: 8px;
      scrollbar-width: thin;
    }
    .news-card {
      min-width: 220px;
      background: #333;
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 2px 8px #0005;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .news-card p {
      margin: 0;
      font-size: 0.95rem;
      color: #fff;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
      max-width: 100%;
    }
    .news-card h4 {
      margin: 0 0 8px 0;
      font-size: 1rem;
      color: #00bfae;
    }
    .disciplines-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .disciplines-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .disciplines-list {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    .discipline-card {
      background: #333;
      border-radius: 12px;
      padding: 10px 14px;
      box-shadow: 0 2px 8px #0005;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 320px;
      max-width: 320px;
      border: 4px solid #00bfae;
    }
    .discipline-img {
      width: 320px;
      height: 320px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 8px;
      background: #222;
      border: none;
      display: block;
    }
    .discipline-name {
      color: #fff;
      font-size: 1.1rem;
      text-align: center;
    }
    .tournaments-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .tournaments-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .tournament-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .tournament-card {
      background: #333;
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 2px 8px #0005;
      display: flex;
      flex-direction: column;
    }
    .tournament-card h4 {
      margin: 0 0 6px 0;
      font-size: 1rem;
      color: #00bfae;
    }
    .tournament-card p {
      margin: 0;
      font-size: 0.95rem;
      color: #fff;
    }
    .dropdown {
      margin: 18px 0;
      width: 100%;
      max-width: 600px;
    }
    .dropdown summary {
      background: #222;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 12px 18px;
      border-radius: 8px;
      cursor: pointer;
      outline: none;
      border: 2px solid #00bfae;
      margin-bottom: 6px;
      user-select: none;
    }
    .dropdown[open] summary {
      background: #00bfae;
      color: #222;
    }
    .dropdown-content {
      background: #333;
      color: #fff;
      padding: 14px 18px;
      border-radius: 0 0 8px 8px;
      font-size: 1rem;
      border-top: 1px solid #00bfae;
    }
    #adminMenuBtn { background: none; border: none; font-size: 2rem; cursor: pointer; margin-left: 12px; display: none; }
    #adminModal { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #000a; z-index: 9999; align-items: center; justify-content: center; }
    #adminModal.active { display: flex; }
    #adminModalContent { background: #222; color: #fff; border-radius: 16px; padding: 32px 24px; min-width: 320px; max-width: 90vw; box-shadow: 0 8px 32px #000b; position: relative; }
    #closeAdminModal { position: absolute; top: 12px; right: 16px; background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }
    #adminModalContent button { padding: 10px; border-radius: 8px; border: none; font-size: 1rem; cursor: pointer; margin-bottom: 8px; width: 100%; max-width: 320px; }
    #banUserBtn { background: #c62828; color: #fff; }
    #unbanUserBtn { background: #388e3c; color: #fff; }
    #givePrizeBtn { background: #1976d2; color: #fff; }
    #disqualifyTeamBtn { background: #fbc02d; color: #222; }
    #editBracketBtn { background: #7b1fa2; color: #fff; }
    #adminResult { margin-top: 18px; color: #0f0; min-height: 24px; }
    .notification-btn {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      position: relative;
      margin-left: 8px;
      color: #fff;
    }
    .notification-badge {
      position: absolute;
      top: 2px;
      right: 2px;
      background: #e53935;
      color: #fff;
      border-radius: 50%;
      font-size: 0.85rem;
      min-width: 20px;
      min-height: 20px;
      padding: 0 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid #222;
      box-sizing: border-box;
      z-index: 2;
    }
    #notificationPopup {
      right: 60px;
      left: auto;
      min-width: 280px;
      max-width: 340px;
      max-height: 400px;
      overflow-y: auto;
    }
    #notificationList {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .notification-item {
      background: #292929;
      border-radius: 8px;
      padding: 10px 12px;
      color: #fff;
      font-size: 0.98rem;
      box-shadow: 0 1px 4px #0004;
      word-break: break-word;
    }
    /* –î–æ–¥–∞—î–º–æ —Å—Ç–∏–ª—ñ –¥–ª—è —Ñ–æ—Ä–º–∏ –∫–æ–º–∞–Ω–¥–∏ */
    .team-form { display: flex; flex-direction: column; gap: 12px; width: 100%; max-width: 340px; margin-top: 8px; align-items: center; }
    .team-form label { font-size: 0.95rem; color: #bbb; margin-bottom: 2px; align-self: flex-start; }
    .team-form input[type="text"] { padding: 8px; border-radius: 6px; border: 1px solid #555; background: #222; color: #fff; font-size: 1rem; outline: none; width: 100%; }
    .team-form input[type="file"] { color: #fff; margin-bottom: 8px; align-self: flex-start; }
    .team-avatar-preview { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #00bfae; margin-bottom: 8px; background: #111; display: none; }
    .team-player-block { background: #292929; border-radius: 8px; padding: 10px 12px; margin-bottom: 8px; width: 100%; box-sizing: border-box; }
    .team-player-title { color: #00bfae; font-weight: bold; margin-bottom: 4px; font-size: 1rem; }
    .team-success-message { color: #00bfae; font-size: 1rem; margin: 10px 0 0 0; text-align: center; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="lang-btn" id="langBtn">üåê</div>
    <img id="avatar" class="avatar-small" src="avatar.jpg" alt="Avatar">
    <button id="notificationBtn" class="notification-btn" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">
      üîî
      <span id="notificationBadge" class="notification-badge" style="display:none;">0</span>
    </button>
    <button id="adminMenuBtn" title="–ê–¥–º—ñ–Ω-–º–µ–Ω—é">üõ°Ô∏è</button>
    <div id="profilePopup" class="popup">
      <button class="register-btn" id="registerBtn" data-i18n="register">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>
      <form class="profile-form" id="profileForm" style="display:none;">
        <label for="standoffNick" data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</label>
        <input type="text" id="standoffNick" name="standoffNick" required maxlength="32" autocomplete="off">
        <label for="standoffId" data-i18n="standoff_id">ID –≤ Standoff</label>
        <input type="text" id="standoffId" name="standoffId" required maxlength="32" autocomplete="off">
        <label for="tgUser" data-i18n="tg_user">Telegram</label>
        <input type="text" id="tgUser" name="tgUser" readonly>
        <button type="submit" class="done-btn" id="doneBtn" data-i18n="done">–ì–æ—Ç–æ–≤–æ</button>
      </form>
      <div class="player-profile" id="playerProfile">
        <div class="player-profile-title" data-i18n="profile">–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è</div>
        <div class="player-profile-row"><span data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</span>: <span id="profileNick"></span></div>
        <div class="player-profile-row"><span data-i18n="standoff_id">ID –≤ Standoff</span>: <span id="profileId"></span></div>
        <div class="player-profile-row"><span data-i18n="tg_user">Telegram</span>: <span id="profileTg"></span></div>
      </div>
      <button class="create-team-btn" id="createTeamBtn" style="display:none;" data-i18n="create_team">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
      <div class="success-message" id="successMsg" style="display:none;" data-i18n="profile_saved">–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!</div>
      <form class="team-form" id="teamForm" style="display:none;">
        <label for="teamAvatar" data-i18n="team_avatar">–ê–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏</label>
        <input type="file" id="teamAvatar" accept="image/*">
        <img id="teamAvatarPreview" class="team-avatar-preview" src="#" alt="Team Avatar">
        <label for="teamTag" data-i18n="team_tag">–¢–µ–≥ –∫–æ–º–∞–Ω–¥–∏</label>
        <input type="text" id="teamTag" maxlength="12" required data-i18n-placeholder="team_tag_ph">
        <label for="teamName" data-i18n="team_name">–ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏</label>
        <input type="text" id="teamName" maxlength="32" required data-i18n-placeholder="team_name_ph">
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="main_player1">–ì—Ä–∞–≤–µ—Ü—å 1 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="main1Id" required data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="main1Nick" required data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="main1Tg" required data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="main_player2">–ì—Ä–∞–≤–µ—Ü—å 2 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="main2Id" required data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="main2Nick" required data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="main2Tg" required data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="main_player3">–ì—Ä–∞–≤–µ—Ü—å 3 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="main3Id" required data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="main3Nick" required data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="main3Tg" required data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="main_player4">–ì—Ä–∞–≤–µ—Ü—å 4 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="main4Id" required data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="main4Nick" required data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="main4Tg" required data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="main_player5">–ì—Ä–∞–≤–µ—Ü—å 5 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="main5Id" required data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="main5Nick" required data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="main5Tg" required data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="sub_player1">–ì—Ä–∞–≤–µ—Ü—å 6 (–∑–∞–ø–∞—Å–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="sub1Id" data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="sub1Nick" data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="sub1Tg" data-i18n-placeholder="player_tg_ph">
        </div>
        <div class="team-player-block">
          <div class="team-player-title" data-i18n="sub_player2">–ì—Ä–∞–≤–µ—Ü—å 7 (–∑–∞–ø–∞—Å–Ω–∏–π)</div>
          <input type="text" placeholder="ID –≤ Standoff 2" id="sub2Id" data-i18n-placeholder="player_id_ph">
          <input type="text" placeholder="–ù—ñ–∫–Ω–µ–π–º" id="sub2Nick" data-i18n-placeholder="player_nick_ph">
          <input type="text" placeholder="Telegram" id="sub2Tg" data-i18n-placeholder="player_tg_ph">
        </div>
        <button type="submit" class="done-btn" id="teamDoneBtn" data-i18n="team_done">–ì–æ—Ç–æ–≤–æ</button>
      </form>
      <div class="team-success-message" id="teamSuccessMsg" style="display:none;" data-i18n="team_created">–ö–æ–º–∞–Ω–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ!</div>
    </div>
    <div id="langPopup" class="popup">
      <button class="lang-option" data-lang="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
      <button class="lang-option" data-lang="en">English</button>
      <button class="lang-option" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
      <button class="lang-option" data-lang="pl">Polski</button>
    </div>
    <div id="notificationPopup" class="popup" style="right:60px; min-width:280px;">
      <div style="font-weight:bold; color:#00bfae; margin-bottom:8px;" id="notificationTitle">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
      <div id="notificationList" style="width:100%;"></div>
      <button id="clearNotificationsBtn" class="done-btn" style="margin-top:10px;">–û—á–∏—Å—Ç–∏—Ç–∏</button>
    </div>
  </div>
  <div id="adminModal">
    <div id="adminModalContent">
      <button id="closeAdminModal">‚úñÔ∏è</button>
      <h2 id="adminMenuTitle" style="color:#00bfae; margin-top:0;">–ê–¥–º—ñ–Ω-–º–µ–Ω—é</h2>
      <div style="display:flex; flex-direction:column; gap:12px;">
        <button id="banUserBtn" data-i18n="ban_user">üö´ –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
        <button id="unbanUserBtn" data-i18n="unban_user">‚úÖ –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
        <button id="givePrizeBtn" data-i18n="give_prize">üèÜ –í–∏–¥–∞—Ç–∏ –ø—Ä–∏–∑</button>
        <button id="disqualifyTeamBtn" data-i18n="disqualify_team">‚ùå –î–∏—Å–∫–≤–∞–ª—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
        <button id="editBracketBtn" data-i18n="edit_bracket">üóÇÔ∏è –ú–æ–¥–µ—Ä—É–≤–∞—Ç–∏ —Å—ñ—Ç–∫—É</button>
      </div>
      <div id="adminResult"></div>
    </div>
  </div>
  <div class="main-section active" id="mainSection">
    <div class="news-section">
      <div class="news-title" data-i18n="news">–ù–æ–≤–∏–Ω–∏</div>
      <div class="news-list" id="newsList">
        <div class="news-card">
          <h4 data-i18n="news4title">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó!</h4>
          <p data-i18n="news4desc">–¢–µ–ø–µ—Ä –≤ –Ω–∞—à–æ–º—É –¥–æ–¥–∞—Ç–∫—É –∑'—è–≤–∏–ª–∞—Å—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó –º–æ–≤–∏.</p>
        </div>
        <div class="news-card">
          <h4 data-i18n="news5title">–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—É—Ä–Ω—ñ—Ä—ñ–≤!</h4>
          <p data-i18n="news5desc">–†–æ–∑–¥—ñ–ª "–¢—É—Ä–Ω—ñ—Ä–∏" –æ–Ω–æ–≤–ª–µ–Ω–æ!</p>
        </div>
      </div>
    </div>
    <div class="disciplines-section">
      <div class="disciplines-title" data-i18n="disciplines">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</div>
      <div class="disciplines-list">
        <div class="discipline-card">
          <img src="Standoff2.jpg" alt="Standoff 2" class="discipline-img">
          <div class="discipline-name">Standoff 2</div>
        </div>
      </div>
    </div>
    <div class="tournaments-section">
      <div class="tournaments-title" data-i18n="tournaments">–¢—É—Ä–Ω—ñ—Ä–∏</div>
      <div class="tournament-list" id="tournamentList">
        <div class="tournament-card">
          <h4>RFORZ Grad Prix Season 1</h4>
          <p data-i18n="tournament1desc">–ü–æ—á–∞—Ç–æ–∫: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥</p>
        </div>
        <div class="tournament-card">
          <h4>Quiz Battle</h4>
          <p data-i18n="tournament2desc">–ü–æ—á–∞—Ç–æ–∫: 10 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 2000‚Ç¥</p>
        </div>
      </div>
    </div>
  </div>
  <div class="rules-section" id="rulesSection">
    <details class="dropdown">
      <summary id="rule1x1Title"></summary>
      <div class="dropdown-content" id="rule1x1Content"></div>
    </details>
    <details class="dropdown">
      <summary id="rule2x2Title"></summary>
      <div class="dropdown-content" id="rule2x2Content"></div>
    </details>
    <details class="dropdown">
      <summary id="rule5x5Title"></summary>
      <div class="dropdown-content" id="rule5x5Content"></div>
    </details>
  </div>
  <div class="awards-section" id="awardsSection"></div>
  <div class="support-section" id="supportSection"></div>
  <div class="bottom-nav">
    <div class="nav-item active" id="navHome"><span>üè†</span><p data-i18n="home">–ì–æ–ª–æ–≤–Ω–∞</p></div>
    <div class="nav-item" id="navRules"><span>üìÑ</span><p data-i18n="rules">–ü—Ä–∞–≤–∏–ª–∞</p></div>
    <div class="nav-item" id="navAwards"><span>üèÜ</span><p data-i18n="awards">–ù–∞–≥–æ—Ä–æ–¥–∏</p></div>
    <div class="nav-item" id="navSupport"><span>ü§ñ</span><p data-i18n="support">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</p></div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const ADMIN_IDS = [5806282517];

    const notificationTranslations = {
      uk: {
        invite: "–í–∞—Å –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –≤ –∫–æ–º–∞–Ω–¥—É.",
        joined: "{user} –≤—Å—Ç—É–ø–∏–≤ –≤ –∫–æ–º–∞–Ω–¥—É.",
        prize: "–í–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø—Ä–∏–∑ –∑–∞ —É—á–∞—Å—Ç—å –≤ —Ç—É—Ä–Ω—ñ—Ä—ñ.",
        banned: "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—É–ª–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ –∑–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ –ü–ó.",
        unbanned: "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ.",
        disqualified: "–í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–∏—Å–∫–≤–∞–ª—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –∑ —Ç—É—Ä–Ω—ñ—Ä—É –∑–∞ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª.",
        title: "–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è",
        clear: "–û—á–∏—Å—Ç–∏—Ç–∏",
        empty: "–ù–µ–º–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω—å",
        team_created_captain: "–í–∏ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–∏–ª–∏ –∫–æ–º–∞–Ω–¥—É {teamName} —ñ –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –¥–æ –Ω–µ—ó –≥—Ä–∞–≤—Ü—ñ–≤: {invitedUsers}.",
        team_invite_player: "–í–∞—Å –∑–∞–ø—Ä–æ—Å–∏–ª–∏ –¥–æ –∫–æ–º–∞–Ω–¥–∏ {teamName}. –ü—Ä–∏–π–Ω—è—Ç–∏/–í—ñ–¥—Ö–∏–ª–∏—Ç–∏."
      },
      en: {
        invite: "You have been invited to a team.",
        joined: "{user} joined the team.",
        prize: "You received a prize for participating in the tournament.",
        banned: "Your account has been blocked for using third-party software.",
        unbanned: "Your account has been unblocked.",
        disqualified: "Your team has been disqualified from the tournament for violating the rules.",
        title: "Notifications",
        clear: "Clear",
        empty: "No notifications",
        team_created_captain: "You have successfully created team {teamName} and invited players: {invitedUsers}.",
        team_invite_player: "You have been invited to team {teamName}. Accept/Decline."
      },
      ru: {
        invite: "–í–∞—Å –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –≤ –∫–æ–º–∞–Ω–¥—É.",
        joined: "{user} –≤—Å—Ç—É–ø–∏–ª –≤ –∫–æ–º–∞–Ω–¥—É.",
        prize: "–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–∏–∑ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–µ.",
        banned: "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—ã–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ü–û.",
        unbanned: "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.",
        disqualified: "–í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–∏—Å–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ —Ç—É—Ä–Ω–∏—Ä–∞ –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª.",
        title: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
        clear: "–û—á–∏—Å—Ç–∏—Ç—å",
        empty: "–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π",
        team_created_captain: "–í—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–ª–∏ –∫–æ–º–∞–Ω–¥—É {teamName} –∏ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –≤ –Ω–µ–µ –∏–≥—Ä–æ–∫–æ–≤: {invitedUsers}.",
        team_invite_player: "–í–∞—Å –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏ –≤ –∫–æ–º–∞–Ω–¥—É {teamName}. –ü—Ä–∏–Ω—è—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å."
      },
      pl: {
        invite: "Zosta≈Çe≈õ zaproszony do dru≈ºyny.",
        joined: "{user} do≈ÇƒÖczy≈Ç do dru≈ºyny.",
        prize: "Otrzyma≈Çe≈õ nagrodƒô za udzia≈Ç w turnieju.",
        banned: "Twoje konto zosta≈Ço zablokowane za u≈ºywanie nieautoryzowanego oprogramowania.",
        unbanned: "Twoje konto zosta≈Ço odblokowane.",
        disqualified: "Twoja dru≈ºyna zosta≈Ça zdyskwalifikowana z turnieju za naruszenie zasad.",
        title: "Powiadomienia",
        clear: "Wyczy≈õƒá",
        empty: "Brak powiadomie≈Ñ",
        team_created_captain: "Pomy≈õlnie utworzy≈Çe≈õ dru≈ºynƒô {teamName} i zaprosi≈Çe≈õ graczy: {invitedUsers}.",
        team_invite_player: "Zosta≈Çe≈õ zaproszony do dru≈ºyny {teamName}. Akceptuj/Odrzuƒá."
      }
    };

    const rulesTranslations = {
      uk: {
        "1x1": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 1x1",
          content: `
            <h3>–ó–∞–≥–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ 1—Ö1.</li>
              <li>–î–æ–∑–≤–æ–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∑–±—Ä–æ—é —Ç–∞ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—î –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–≥–∏ –≥—Ä–∏.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á—É</h3>
            <ul>
              <li>–ú–∞–ø–∞: Sandstone</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±–∏</li>
              <li>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤: 16 (–¥–æ 8 –ø–µ—Ä–µ–º–æ–≥)</li>
              <li>–ß–∞—Å —Ä–∞—É–Ω–¥—É: 2:00 —Ö–≤</li>
            </ul>
            <h3>–î—ñ—ó –≥—Ä–∞–≤—Ü—ñ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º–∞—Ç—á—É –≥—Ä–∞–≤—Ü—ñ –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ø—ñ–Ω–≥.</li>
              <li>–£ —Ä–∞–∑—ñ —Ä–æ–∑'—î–¥–Ω–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∞–±–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑ —Ç–æ–≥–æ –∂ —Ä–∞—É–Ω–¥—É.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ–∏</h3>
            <ul>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —á–∏—Ç—ñ–≤ ‚Äì –±–∞–Ω –Ω–∞–∑–∞–≤–∂–¥–∏.</li>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–∞–≥—ñ–≤ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
              <li>–û–±—Ä–∞–∑–∏ ‚Äì –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä—ñ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
            </ul>
          `
        },
        "2x2": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 2x2",
          content: `
            <h3>–ó–∞–≥–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ 2—Ö2.</li>
              <li>–î–æ–∑–≤–æ–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∑–±—Ä–æ—é —Ç–∞ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—î –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–≥–∏ –≥—Ä–∏.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á—É</h3>
            <ul>
              <li>–ú–∞–ø–∞: Province</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±–∏</li>
              <li>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤: 20 (–¥–æ 10 –ø–µ—Ä–µ–º–æ–≥)</li>
              <li>–ß–∞—Å —Ä–∞—É–Ω–¥—É: 2:15 —Ö–≤</li>
            </ul>
            <h3>–î—ñ—ó –≥—Ä–∞–≤—Ü—ñ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º–∞—Ç—á—É –≥—Ä–∞–≤—Ü—ñ –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ø—ñ–Ω–≥.</li>
              <li>–£ —Ä–∞–∑—ñ —Ä–æ–∑'—î–¥–Ω–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∞–±–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑ —Ç–æ–≥–æ –∂ —Ä–∞—É–Ω–¥—É.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ–∏</h3>
            <ul>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —á–∏—Ç—ñ–≤ ‚Äì –±–∞–Ω –Ω–∞–∑–∞–≤–∂–¥–∏.</li>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–∞–≥—ñ–≤ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
              <li>–û–±—Ä–∞–∑–∏ ‚Äì –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä—ñ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
            </ul>
          `
        },
        "5x5": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 5x5",
          content: `
            <h3>–ó–∞–≥–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É —Ñ–æ—Ä–º–∞—Ç—ñ 5—Ö5.</li>
              <li>–î–æ–∑–≤–æ–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∑–±—Ä–æ—é —Ç–∞ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—î –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è.</li>
              <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–≥–∏ –≥—Ä–∏.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á—É</h3>
            <ul>
              <li>–ú–∞–ø–∞: Training Outside</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±–∏</li>
              <li>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤: 24 (–¥–æ 13 –ø–µ—Ä–µ–º–æ–≥)</li>
              <li>–ß–∞—Å —Ä–∞—É–Ω–¥—É: 2:30 —Ö–≤</li>
            </ul>
            <h3>–î—ñ—ó –≥—Ä–∞–≤—Ü—ñ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º –º–∞—Ç—á—É –≥—Ä–∞–≤—Ü—ñ –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ø—ñ–Ω–≥.</li>
              <li>–£ —Ä–∞–∑—ñ —Ä–æ–∑'—î–¥–Ω–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∞–±–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑ —Ç–æ–≥–æ –∂ —Ä–∞—É–Ω–¥—É.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ–∏</h3>
            <ul>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —á–∏—Ç—ñ–≤ ‚Äì –±–∞–Ω –Ω–∞–∑–∞–≤–∂–¥–∏.</li>
              <li>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–∞–≥—ñ–≤ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
              <li>–û–±—Ä–∞–∑–∏ ‚Äì –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä—ñ ‚Äì —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –ø–æ—Ä–∞–∑–∫–∞.</li>
            </ul>
          `
        }
      },
      en: {
        "1x1": {
          title: "1x1 Rules",
          content: `
            <h3>General Rules</h3>
            <ul>
              <li>Matches are played in 1x1 format.</li>
              <li>Any weapon and equipment are allowed.</li>
              <li>Use of third-party software is prohibited.</li>
              <li>Exploiting game bugs is prohibited.</li>
            </ul>
            <h3>Match Format</h3>
            <ul>
              <li>Map: Sandstone</li>
              <li>Mode: Bomb Defuse</li>
              <li>Number of rounds: 16 (up to 8 wins)</li>
              <li>Round time: 2:00 min</li>
            </ul>
            <h3>Player Actions</h3>
            <ul>
              <li>Before the match, players must check their connection and ping.</li>
              <li>In case of player disconnection or technical problems, the match is paused and resumed from the same round.</li>
            </ul>
            <h3>Penalties</h3>
            <ul>
              <li>Using cheats - permanent ban.</li>
              <li>Exploiting bugs - technical defeat.</li>
              <li>Insults - warning, repeated - technical defeat.</li>
            </ul>
          `
        },
        "2x2": {
          title: "2x2 Rules",
          content: `
            <h3>General Rules</h3>
            <ul>
              <li>Matches are played in 2x2 format.</li>
              <li>Any weapon and equipment are allowed.</li>
              <li>Use of third-party software is prohibited.</li>
              <li>Exploiting game bugs is prohibited.</li>
            </ul>
            <h3>Match Format</h3>
            <ul>
              <li>Map: Province</li>
              <li>Mode: Bomb Defuse</li>
              <li>Number of rounds: 20 (up to 10 wins)</li>
              <li>Round time: 2:15 min</li>
            </ul>
            <h3>Player Actions</h3>
            <ul>
              <li>Before the match, players must check their connection and ping.</li>
              <li>In case of player disconnection or technical problems, the match is paused and resumed from the same round.</li>
            </ul>
            <h3>Penalties</h3>
            <ul>
              <li>Using cheats - permanent ban.</li>
              <li>Exploiting bugs - technical defeat.</li>
              <li>Insults - warning, repeated - technical defeat.</li>
            </ul>
          `
        },
        "5x5": {
          title: "5x5 Rules",
          content: `
            <h3>General Rules</h3>
            <ul>
              <li>Matches are played in 5x5 format.</li>
              <li>Any weapon and equipment are allowed.</li>
              <li>Use of third-party software is prohibited.</li>
              <li>Exploiting game bugs is prohibited.</li>
            </ul>
            <h3>Match Format</h3>
            <ul>
              <li>Map: Training Outside</li>
              <li>Mode: Bomb Defuse</li>
              <li>Number of rounds: 24 (up to 13 wins)</li>
              <li>Round time: 2:30 min</li>
            </ul>
            <h3>Player Actions</h3>
            <ul>
              <li>Before the match, players must check their connection and ping.</li>
              <li>In case of player disconnection or technical problems, the match is paused and resumed from the same round.</li>
            </ul>
            <h3>Penalties</h3>
            <ul>
              <li>Using cheats - permanent ban.</li>
              <li>Exploiting bugs - technical defeat.</li>
              <li>Insults - warning, repeated - technical defeat.</li>
            </ul>
          `
        }
      },
      ru: {
        "1x1": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 1x1",
          content: `
            <h3>–û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ 1—Ö1.</li>
              <li>–†–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ –æ—Ä—É–∂–∏–µ –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–≥–∏ –∏–≥—Ä—ã.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á–∞</h3>
            <ul>
              <li>–ö–∞—Ä—Ç–∞: Sandstone</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±—ã</li>
              <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤: 16 (–¥–æ 8 –ø–æ–±–µ–¥)</li>
              <li>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞: 2:00 –º–∏–Ω</li>
            </ul>
            <h3>–î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∞—Ç—á–∞ –∏–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–∏–Ω–≥.</li>
              <li>–í —Å–ª—É—á–∞–µ —Ä–∞–∑—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —Ç–æ–≥–æ –∂–µ —Ä–∞—É–Ω–¥–∞.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ—ã</h3>
            <ul>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Ç–æ–≤ ‚Äì –±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞.</li>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–≥–æ–≤ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
              <li>–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è ‚Äì –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
            </ul>
          `
        },
        "2x2": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 2x2",
          content: `
            <h3>–û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ 2—Ö2.</li>
              <li>–†–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ –æ—Ä—É–∂–∏–µ –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–≥–∏ –∏–≥—Ä—ã.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á–∞</h3>
            <ul>
              <li>–ö–∞—Ä—Ç–∞: Province</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±—ã</li>
              <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤: 20 (–¥–æ 10 –ø–æ–±–µ–≥)</li>
              <li>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞: 2:15 –º–∏–Ω</li>
            </ul>
            <h3>–î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∞—Ç—á–∞ –∏–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–∏–Ω–≥.</li>
              <li>–í —Å–ª—É—á–∞–µ —Ä–∞–∑—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —Ç–æ–≥–æ –∂–µ —Ä–∞—É–Ω–¥–∞.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ—ã</h3>
            <ul>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Ç–æ–≤ ‚Äì –±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞.</li>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–≥–æ–≤ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
              <li>–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è ‚Äì –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
            </ul>
          `
        },
        "5x5": {
          title: "–ü—Ä–∞–≤–∏–ª–∞ 5x5",
          content: `
            <h3>–û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h3>
            <ul>
              <li>–ú–∞—Ç—á–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ 5—Ö5.</li>
              <li>–†–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ –æ—Ä—É–∂–∏–µ –∏ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ.</li>
              <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–≥–∏ –∏–≥—Ä—ã.</li>
            </ul>
            <h3>–§–æ—Ä–º–∞—Ç –º–∞—Ç—á–∞</h3>
            <ul>
              <li>–ö–∞—Ä—Ç–∞: Training Outside</li>
              <li>–†–µ–∂–∏–º: –ó–∞–∫–ª–∞–¥–∫–∞ –±–æ–º–±—ã</li>
              <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤: 24 (–¥–æ 13 –ø–æ–±–µ–¥)</li>
              <li>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞: 2:30 –º–∏–Ω</li>
            </ul>
            <h3>–î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–æ–≤</h3>
            <ul>
              <li>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –º–∞—Ç—á–∞ –∏–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–∏–Ω–≥.</li>
              <li>–í —Å–ª—É—á–∞–µ —Ä–∞–∑—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–∞—Ç—á –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —Ç–æ–≥–æ –∂–µ —Ä–∞—É–Ω–¥–∞.</li>
            </ul>
            <h3>–®—Ç—Ä–∞—Ñ—ã</h3>
            <ul>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Ç–æ–≤ ‚Äì –±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞.</li>
              <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–≥–æ–≤ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
              <li>–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è ‚Äì –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ ‚Äì —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ.</li>
            </ul>
          `
        }
      },
      pl: {
        "1x1": {
          title: "Zasady 1x1",
          content: `
            <h3>Zasady og√≥lne</h3>
            <ul>
              <li>Mecze rozgrywane sƒÖ w formacie 1x1.</li>
              <li>Dozwolone jest u≈ºywanie dowolnej broni i sprzƒôtu.</li>
              <li>Zabrania siƒô u≈ºywania oprogramowania os√≥b trzecich.</li>
              <li>Zabrania siƒô wykorzystywania b≈Çƒôd√≥w w grze.</li>
            </ul>
            <h3>Format meczu</h3>
            <ul>
              <li>Mapa: Sandstone</li>
              <li>Tryb: Podk≈Çadanie bomby</li>
              <li>Liczba rund: 16 (do 8 zwyciƒôstw)</li>
              <li>Czas rundy: 2:00 min</li>
            </ul>
            <h3>Dzia≈Çania graczy</h3>
            <ul>
              <li>Przed meczem gracze muszƒÖ sprawdziƒá swoje po≈ÇƒÖczenie i ping.</li>
              <li>W przypadku roz≈ÇƒÖczenia gracza lub problem√≥w technicznych mecz zostaje wstrzymany i wznowiony od tej samej rundy.</li>
            </ul>
            <h3>Kary</h3>
            <ul>
              <li>U≈ºywanie cheat√≥w - ban na zawsze.</li>
              <li>Wykorzystywanie b≈Çƒôd√≥w - pora≈ºka techniczna.</li>
              <li>Obra≈∫liwe zachowanie - ostrze≈ºenie, powt√≥rne - pora≈ºka techniczna.</li>
            </ul>
          `
        },
        "2x2": {
          title: "Zasady 2x2",
          content: `
            <h3>Zasady og√≥lne</h3>
            <ul>
              <li>Mecze rozgrywane sƒÖ w formacie 2x2.</li>
              <li>Dozwolone jest u≈ºywanie dowolnej broni i sprzƒôtu.</li>
              <li>Zabrania siƒô u≈ºywania oprogramowania os√≥b trzecich.</li>
              <li>Zabrania siƒô wykorzystywania b≈Çƒôd√≥w w grze.</li>
            </ul>
            <h3>Format meczu</h3>
            <ul>
              <li>Mapa: Province</li>
              <li>Tryb: Podk≈Çadanie bomby</li>
              <li>Liczba rund: 20 (do 10 zwyciƒôstw)</li>
              <li>Czas rundy: 2:15 min</li>
            </ul>
            <h3>Dzia≈Çania graczy</h3>
            <ul>
              <li>Przed meczem gracze muszƒÖ sprawdziƒá swoje po≈ÇƒÖczenie i ping.</li>
              <li>W przypadku roz≈ÇƒÖczenia gracza lub problem√≥w technicznych mecz zostaje wstrzymany i wznowiony od tej samej rundy.</li>
            </ul>
            <h3>Kary</h3>
            <ul>
              <li>U≈ºywanie cheat√≥w - ban na zawsze.</li>
              <li>Wykorzystywanie b≈Çƒôd√≥w - pora≈ºka techniczna.</li>
              <li>Obra≈∫liwe zachowanie - ostrze≈ºenie, powt√≥rne - pora≈ºka techniczna.</li>
            </ul>
          `
        },
        "5x5": {
          title: "Zasady 5x5",
          content: `
            <h3>Zasady og√≥lne</h3>
            <ul>
              <li>Mecze rozgrywane sƒÖ w formacie 5x5.</li>
              <li>Dozwolone jest u≈ºywanie dowolnej broni i sprzƒôtu.</li>
              <li>Zabrania siƒô u≈ºywania oprogramowania os√≥b trzecich.</li>
              <li>Zabrania siƒô wykorzystywania b≈Çƒôd√≥w w grze.</li>
            </ul>
            <h3>Format meczu</h3>
            <ul>
              <li>Mapa: Training Outside</li>
              <li>Tryb: Podk≈Çadanie bomby</li>
              <li>Liczba rund: 24 (do 13 zwyciƒôstw)</li>
              <li>Czas rundy: 2:30 min</li>
            </ul>
            <h3>Dzia≈Çania graczy</h3>
            <ul>
              <li>Przed meczem gracze muszƒÖ sprawdziƒá swoje po≈ÇƒÖczenie i ping.</li>
              <li>W przypadku roz≈ÇƒÖczenia gracza lub problem√≥w technicznych mecz zostaje wstrzymany i wznowiony od tej samej rundy.</li>
            </ul>
            <h3>Kary</h3>
            <ul>
              <li>U≈ºywanie cheat√≥w - ban na zawsze.</li>
              <li>Wykorzystywanie b≈Çƒôd√≥w - pora≈ºka techniczna.</li>
              <li>Obra≈∫liwe zachowanie - ostrze≈ºenie, powt√≥rne - pora≈ºka techniczna.</li>
            </ul>
          `
        }
      }
    };

    let currentLang = localStorage.getItem('lang') || 'uk';
    const webApp = window.Telegram.WebApp;

    document.addEventListener('DOMContentLoaded', () => {
      webApp.ready();
      webApp.expand();
      updateContent();
      loadProfile();
      loadNotifications();

      // Telegram User Data
      const tgUser = webApp.initDataUnsafe.user;
      if (tgUser) {
        document.getElementById('tgUser').value = `@${tgUser.username}`;
        document.getElementById('profileTg').textContent = `@${tgUser.username}`;
        checkAdminStatus(tgUser.id);
      }

      // Event Listeners
      document.getElementById('avatar').addEventListener('click', toggleProfilePopup);
      document.getElementById('langBtn').addEventListener('click', toggleLangPopup);
      document.getElementById('registerBtn').addEventListener('click', showProfileForm);
      document.getElementById('profileForm').addEventListener('submit', saveProfile);
      document.getElementById('createTeamBtn').addEventListener('click', showTeamForm);
      document.getElementById('teamForm').addEventListener('submit', createTeam);
      document.getElementById('teamAvatar').addEventListener('change', previewTeamAvatar);

      // Admin menu
      document.getElementById('adminMenuBtn').addEventListener('click', toggleAdminModal);
      document.getElementById('closeAdminModal').addEventListener('click', () => {
        document.getElementById('adminModal').classList.remove('active');
        document.getElementById('adminResult').textContent = '';
      });
      document.getElementById('banUserBtn').addEventListener('click', banUser);
      document.getElementById('unbanUserBtn').addEventListener('click', unbanUser);
      document.getElementById('givePrizeBtn').addEventListener('click', givePrize);

      // Notification button
      document.getElementById('notificationBtn').addEventListener('click', toggleNotificationPopup);
      document.getElementById('clearNotificationsBtn').addEventListener('click', clearAllNotifications);

      // Language options
      document.querySelectorAll('.lang-option').forEach(button => {
        button.addEventListener('click', (event) => {
          currentLang = event.target.dataset.lang;
          localStorage.setItem('lang', currentLang);
          updateContent();
          toggleLangPopup();
        });
      });

      // Navigation
      document.getElementById('navHome').addEventListener('click', () => showSection('mainSection', 'navHome'));
      document.getElementById('navRules').addEventListener('click', () => showSection('rulesSection', 'navRules'));
      document.getElementById('navAwards').addEventListener('click', () => showSection('awardsSection', 'navAwards'));
      document.getElementById('navSupport').addEventListener('click', () => showSection('supportSection', 'navSupport'));
    });

    function updateContent() {
      // Update elements with data-i18n attribute
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.dataset.i18n;
        if (i18n[currentLang] && i18n[currentLang][key]) {
          element.textContent = i18n[currentLang][key];
        }
      });

      // Update input placeholders with data-i18n-placeholder attribute
      document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.dataset.i18nPlaceholder; // Corrected to match HTML
        if (i18n[currentLang] && i18n[currentLang][key]) {
          element.placeholder = i18n[currentLang][key];
        }
      });

      // Update rules section
      for (const ruleType in rulesTranslations[currentLang]) {
        const rule = rulesTranslations[currentLang][ruleType];
        const titleElement = document.getElementById(`rule${ruleType}Title`);
        const contentElement = document.getElementById(`rule${ruleType}Content`);
        if (titleElement) titleElement.textContent = rule.title;
        if (contentElement) contentElement.innerHTML = rule.content;
      }

      // Update notification title
      const notificationTitle = document.getElementById('notificationTitle');
      if (notificationTitle) {
        notificationTitle.textContent = notificationTranslations[currentLang].title;
      }
      const clearNotificationsBtn = document.getElementById('clearNotificationsBtn');
      if (clearNotificationsBtn) {
        clearNotificationsBtn.textContent = notificationTranslations[currentLang].clear;
      }

      renderNotifications();
    }

    function showSection(sectionId, navItemId) {
      document.querySelectorAll('.main-section, .rules-section, .awards-section, .support-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(sectionId).classList.add('active');

      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      document.getElementById(navItemId).classList.add('active');

      webApp.scrollTo(0, 0); // Scroll to top when changing sections
    }

    function toggleProfilePopup() {
      document.getElementById('profilePopup').classList.toggle('active');
      document.getElementById('langPopup').classList.remove('active');
      document.getElementById('notificationPopup').classList.remove('active');
    }

    function toggleLangPopup() {
      document.getElementById('langPopup').classList.toggle('active');
      document.getElementById('profilePopup').classList.remove('active');
      document.getElementById('notificationPopup').classList.remove('active');
    }

    function toggleNotificationPopup() {
      document.getElementById('notificationPopup').classList.toggle('active');
      document.getElementById('profilePopup').classList.remove('active');
      document.getElementById('langPopup').classList.remove('active');
      updateNotificationBadge();
    }

    function showProfileForm() {
      document.getElementById('registerBtn').style.display = 'none';
      document.getElementById('profileForm').style.display = 'flex';
      document.getElementById('playerProfile').style.display = 'none';
      document.getElementById('createTeamBtn').style.display = 'none';
      document.getElementById('successMsg').style.display = 'none';
      document.getElementById('teamForm').style.display = 'none';
      document.getElementById('teamSuccessMsg').style.display = 'none';
    }

    function saveProfile(event) {
      event.preventDefault();
      const standoffNick = document.getElementById('standoffNick').value;
      const standoffId = document.getElementById('standoffId').value;
      const tgUser = document.getElementById('tgUser').value;

      const profileData = { standoffNick, standoffId, tgUser };
      localStorage.setItem('userProfile', JSON.stringify(profileData));

      document.getElementById('profileNick').textContent = standoffNick;
      document.getElementById('profileId').textContent = standoffId;
      document.getElementById('profileTg').textContent = tgUser;

      document.getElementById('profileForm').style.display = 'none';
      document.getElementById('playerProfile').style.display = 'block';
      document.getElementById('successMsg').style.display = 'block';
      document.getElementById('createTeamBtn').style.display = 'block';
    }

    function loadProfile() {
      const profileData = JSON.parse(localStorage.getItem('userProfile'));
      if (profileData) {
        document.getElementById('standoffNick').value = profileData.standoffNick;
        document.getElementById('standoffId').value = profileData.standoffId;
        document.getElementById('profileNick').textContent = profileData.standoffNick;
        document.getElementById('profileId').textContent = profileData.standoffId;

        document.getElementById('registerBtn').style.display = 'none';
        document.getElementById('profileForm').style.display = 'none';
        document.getElementById('playerProfile').style.display = 'block';
        document.getElementById('createTeamBtn').style.display = 'block';
      } else {
        document.getElementById('registerBtn').style.display = 'block';
        document.getElementById('profileForm').style.display = 'none';
        document.getElementById('playerProfile').style.display = 'none';
        document.getElementById('createTeamBtn').style.display = 'none';
      }
    }

    function checkAdminStatus(userId) {
      const adminMenuBtn = document.getElementById('adminMenuBtn');
      if (ADMIN_IDS.includes(userId)) {
        adminMenuBtn.style.display = 'block';
      } else {
        adminMenuBtn.style.display = 'none';
      }
    }

    function toggleAdminModal() {
      document.getElementById('adminModal').classList.toggle('active');
      document.getElementById('profilePopup').classList.remove('active');
      document.getElementById('langPopup').classList.remove('active');
      document.getElementById('notificationPopup').classList.remove('active');
      document.getElementById('adminResult').textContent = '';
    }

    async function getUserStatus(username) {
      try {
        const response = await fetch(`/api/user_status/${username}`);
        const data = await response.json();
        return data.is_banned;
      } catch (error) {
        console.error('Error fetching user status:', error);
        return false;
      }
    }

    async function banUser() {
      const username = prompt("–í–≤–µ–¥—ñ—Ç—å Telegram —é–∑–µ—Ä–Ω–µ–π–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è (–±–µ–∑ @):");
      if (username) {
        try {
          const response = await fetch('/api/ban_user', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username: username }),
          });
          const result = await response.json();
          document.getElementById('adminResult').textContent = result.message;
          if (result.success) {
            addNotification('banned', { user: username }, result.user_id);
          }
        } catch (error) {
          console.error('Error banning user:', error);
          document.getElementById('adminResult').textContent = '–ü–æ–º–∏–ª–∫–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.';
        }
      }
    }

    async function unbanUser() {
      const username = prompt("–í–≤–µ–¥—ñ—Ç—å Telegram —é–∑–µ—Ä–Ω–µ–π–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è (–±–µ–∑ @):");
      if (username) {
        try {
          const response = await fetch('/api/unban_user', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username: username }),
          });
          const result = await response.json();
          document.getElementById('adminResult').textContent = result.message;
          if (result.success) {
            addNotification('unbanned', { user: username }, result.user_id);
          }
        } catch (error) {
          console.error('Error unbanning user:', error);
          document.getElementById('adminResult').textContent = '–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.';
        }
      }
    }

    async function givePrize() {
      const username = prompt("–í–≤–µ–¥—ñ—Ç—å Telegram —é–∑–µ—Ä–Ω–µ–π–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è –≤–∏–¥–∞—á—ñ –ø—Ä–∏–∑—É (–±–µ–∑ @):");
      if (username) {
        try {
          const response = await fetch('/api/give_prize', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username: username }),
          });
          const result = await response.json();
          document.getElementById('adminResult').textContent = result.message;
          if (result.success) {
            addNotification('prize', { user: username }, result.user_id);
          }
        } catch (error) {
          console.error('Error giving prize:', error);
          document.getElementById('adminResult').textContent = '–ü–æ–º–∏–ª–∫–∞ –≤–∏–¥–∞—á—ñ –ø—Ä–∏–∑—É.';
        }
      }
    }

    function addNotification(type, data = {}, userId = null) {
      let notifications = JSON.parse(localStorage.getItem('notifications')) || [];
      const timestamp = new Date().toISOString();
      notifications.unshift({ type, data, timestamp, userId });
      localStorage.setItem('notifications', JSON.stringify(notifications));
      renderNotifications();
      updateNotificationBadge();
    }

    function renderNotifications() {
      const notificationList = document.getElementById('notificationList');
      notificationList.innerHTML = '';
      let notifications = JSON.parse(localStorage.getItem('notifications')) || [];

      const tgUser = webApp.initDataUnsafe.user;
      const currentUserId = tgUser ? tgUser.id : null;

      const relevantNotifications = notifications.filter(notification => {
        if (notification.userId === null || notification.userId === undefined) {
          return true;
        }
        return notification.userId === currentUserId;
      });

      if (relevantNotifications.length === 0) {
        notificationList.innerHTML = `<div class="notification-item">${notificationTranslations[currentLang].empty}</div>`;
        return;
      }

      relevantNotifications.forEach(notification => {
        const notificationItem = document.createElement('div');
        notificationItem.classList.add('notification-item');
        let message = notificationTranslations[currentLang][notification.type] || "–ù–æ–≤–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è";

        for (const key in notification.data) {
          message = message.replace(`{${key}}`, notification.data[key]);
        }

        const date = new Date(notification.timestamp);
        const timeString = date.toLocaleTimeString(currentLang, { hour: '2-digit', minute: '2-digit' });
        const dateString = date.toLocaleDateString(currentLang);

        notificationItem.innerHTML = `
          <div>${message}</div>
          <div style="font-size:0.8em; color:#aaa; margin-top:5px;">${dateString} ${timeString}</div>
        `;
        notificationList.appendChild(notificationItem);
      });
    }

    function loadNotifications() {
      renderNotifications();
      updateNotificationBadge();
    }

    function clearAllNotifications() {
      localStorage.removeItem('notifications');
      renderNotifications();
      updateNotificationBadge();
    }

    function updateNotificationBadge() {
      const notificationBadge = document.getElementById('notificationBadge');
      const notifications = JSON.parse(localStorage.getItem('notifications')) || [];

      const tgUser = webApp.initDataUnsafe.user;
      const currentUserId = tgUser ? tgUser.id : null;

      const unreadNotificationsCount = notifications.filter(notification => {
        if (notification.userId === null || notification.userId === undefined) {
          return true;
        }
        return notification.userId === currentUserId;
      }).length;

      if (unreadNotificationsCount > 0) {
        notificationBadge.textContent = unreadNotificationsCount;
        notificationBadge.style.display = 'flex';
      } else {
        notificationBadge.style.display = 'none';
      }
    }

    function showTeamForm() {
      document.getElementById('createTeamBtn').style.display = 'none';
      document.getElementById('teamForm').style.display = 'flex';
      document.getElementById('teamSuccessMsg').style.display = 'none';
    }

    function previewTeamAvatar(event) {
      const preview = document.getElementById('teamAvatarPreview');
      const file = event.target.files[0];
      const reader = new FileReader();

      reader.onloadend = function () {
        preview.src = reader.result;
        preview.style.display = 'block';
      }

      if (file) {
        reader.readAsDataURL(file);
      } else {
        preview.src = "";
        preview.style.display = 'none';
      }
    }

    async function createTeam(event) {
      event.preventDefault();

      const teamName = document.getElementById('teamName').value;
      const teamTag = document.getElementById('teamTag').value;
      const captainUsername = webApp.initDataUnsafe.user.username;

      const players = [];
      for (let i = 1; i <= 5; i++) {
        const id = document.getElementById(`main${i}Id`).value;
        const nick = document.getElementById(`main${i}Nick`).value;
        const tg = document.getElementById(`main${i}Tg`).value;
        if (id && nick) {
          players.push({ id, nick, tg });
        }
      }
      for (let i = 1; i <= 2; i++) {
        const id = document.getElementById(`sub${i}Id`).value;
        const nick = document.getElementById(`sub${i}Nick`).value;
        const tg = document.getElementById(`sub${i}Tg`).value;
        if (id && nick) {
          players.push({ id, nick, tg });
        }
      }

      const teamData = {
        team_name: teamName,
        team_tag: teamTag,
        captain_username: captainUsername,
        players: players.filter(p => p.tg).map(p => p.tg)
      };

      try {
        const response = await fetch('/api/create_team', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(teamData),
        });

        const result = await response.json();

        if (result.success) {
          const invitedPlayers = teamData.players.length > 0
            ? teamData.players.map(username => `@${username}`).join(', ')
            : '–Ω–µ–º–∞—î';

          addNotification('team_created_captain', {
            teamName: teamName,
            invitedUsers: invitedPlayers
          });

          document.getElementById('teamForm').style.display = "none";
          document.getElementById('teamSuccessMsg').style.display = "block";
          document.getElementById('createTeamBtn').style.display = "block";
        } else {
          alert(`–ü–æ–º–∏–ª–∫–∞: ${result.message}`);
        }
      } catch (error) {
        console.error('Error creating team:', error);
        alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ–º–∞–Ω–¥–∏. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
      }
    }
  </script>
</body>
</html>
