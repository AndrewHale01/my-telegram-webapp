<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Telegram WebApp</title>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZN665FNYF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TZN665FNYF');
  </script>
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      padding-bottom: 60px;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      position: relative;
    }
    .lang-btn {
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 0px;
    }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00bfae;
      cursor: pointer;
      object-fit: cover;
      background: #111;
      transition: box-shadow 0.2s;
    }
    .avatar-small:hover {
      box-shadow: 0 0 0 4px #00bfae55;
    }
    .popup {
      display: none;
      position: absolute;
      top: 60px;
      right: 0;
      background: #333;
      padding: 24px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 10;
      flex-direction: column;
      min-width: 260px;
      align-items: center;
      animation: fadeIn 0.2s;
    }
    .popup.active {
      display: flex;
    }
    .register-btn, .done-btn, .create-team-btn {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin: 8px 0;
      transition: background 0.2s;
      width: 100%;
      max-width: 220px;
    }
    .register-btn:hover, .done-btn:hover, .create-team-btn:hover {
      background: #1976d2;
    }
    .profile-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 220px;
      margin-top: 8px;
    }
    .profile-form label {
      font-size: 0.95rem;
      color: #bbb;
      margin-bottom: 2px;
    }
    .profile-form input {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 100%;
    }
    .profile-form input[readonly] {
      background: #222;
      color: #aaa;
      border: 1px solid #444;
    }
    .success-message {
      color: #00bfae;
      font-size: 1rem;
      margin: 10px 0 0 0;
      text-align: center;
    }
    .player-profile {
      width: 100%;
      max-width: 220px;
      margin-top: 8px;
      margin-bottom: 8px;
      background: #222;
      border-radius: 10px;
      padding: 12px 14px;
      color: #fff;
      font-size: 1rem;
      box-sizing: border-box;
      display: none;
    }
    .player-profile-title {
      margin-bottom: 8px;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.05rem;
    }
    .player-profile-row {
      margin-bottom: 4px;
      word-break: break-word;
    }
    .lang-option {
      background: #444;
      color: #fff;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 5px;
    }
    .lang-option:hover {
      background: #555;
    }
    #langPopup {
      left: 0;
      right: auto;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
    .nav-item:hover {
      color: #00bfae;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }
    .news-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .news-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .news-list {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding-bottom: 8px;
      scrollbar-width: thin;
    }
    .news-card {
      min-width: 220px;
      background: #333;
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 2px 8px #0005;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .news-card p {
      margin: 0;
      font-size: 0.95rem;
      color: #fff;
      word-break: break-word;
      white-space: normal;
      overflow-wrap: break-word;
      max-width: 100%;
    }
    .news-card h4 {
      margin: 0 0 8px 0;
      font-size: 1rem;
      color: #00bfae;
    }
    .disciplines-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .disciplines-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .disciplines-list {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    .discipline-card {
      background: #333;
      border-radius: 12px;
      padding: 10px 14px;
      box-shadow: 0 2px 8px #0005;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 360px;
      max-width: 360px;
      border: 4px solid #00bfae;
    }
    .discipline-img {
      width: 320px;
      height: 320px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 8px;
      background: #222;
      border: none;
      display: block;
    }
    .discipline-name {
      color: #fff;
      font-size: 1.1rem;
      text-align: center;
    }
    .tournaments-section {
      margin: 0 0 24px 0;
      padding: 0 16px;
    }
    .tournaments-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #00bfae;
      letter-spacing: 0.5px;
    }
    .tournament-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .tournament-card {
      background: #333;
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 2px 8px #0005;
      display: flex;
      flex-direction: column;
    }
    .tournament-card h4 {
      margin: 0 0 6px 0;
      font-size: 1rem;
      color: #00bfae;
    }
    .tournament-card p {
      margin: 0;
      font-size: 0.95rem;
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="lang-btn" id="langBtn">üåê</div>
    <img id="avatar" class="avatar-small" src="avatar.jpg" alt="Avatar">
    <div id="profilePopup" class="popup">
      <button class="register-btn" id="registerBtn" data-i18n="register">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>
      <form class="profile-form" id="profileForm" style="display:none;">
        <label for="standoffNick" data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</label>
        <input type="text" id="standoffNick" name="standoffNick" required maxlength="32" autocomplete="off">
        <label for="standoffId" data-i18n="standoff_id">ID –≤ Standoff</label>
        <input type="text" id="standoffId" name="standoffId" required maxlength="32" autocomplete="off">
        <label for="tgUser" data-i18n="tg_user">Telegram</label>
        <input type="text" id="tgUser" name="tgUser" readonly>
        <button type="submit" class="done-btn" id="doneBtn" data-i18n="done">–ì–æ—Ç–æ–≤–æ</button>
      </form>
      <div class="player-profile" id="playerProfile">
        <div class="player-profile-title" data-i18n="profile">–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è</div>
        <div class="player-profile-row"><span data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</span>: <span id="profileNick"></span></div>
        <div class="player-profile-row"><span data-i18n="standoff_id">ID –≤ Standoff</span>: <span id="profileId"></span></div>
        <div class="player-profile-row"><span data-i18n="tg_user">Telegram</span>: <span id="profileTg"></span></div>
      </div>
      <button class="create-team-btn" id="createTeamBtn" style="display:none;" data-i18n="create_team">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
      <div class="success-message" id="successMsg" style="display:none;" data-i18n="profile_saved">–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!</div>
    </div>
    <div id="langPopup" class="popup">
      <button class="lang-option" data-lang="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
      <button class="lang-option" data-lang="en">English</button>
      <button class="lang-option" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
      <button class="lang-option" data-lang="pl">Polski</button>
    </div>
  </div>

  <!-- –ù–æ–≤–∏–Ω–∏ -->
  <div class="news-section">
    <div class="news-title" data-i18n="news">–ù–æ–≤–∏–Ω–∏</div>
    <div class="news-list" id="newsList">
      <div class="news-card">
        <h4 data-i18n="news4title">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó!</h4>
        <p data-i18n="news4desc">–¢–µ–ø–µ—Ä –≤ –Ω–∞—à–æ–º—É –¥–æ–¥–∞—Ç–∫—É –∑'—è–≤–∏–ª–∞—Å—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó –º–æ–≤–∏.</p>
      </div>
      <div class="news-card">
        <h4 data-i18n="news5title">–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—É—Ä–Ω—ñ—Ä—ñ–≤!</h4>
        <p data-i18n="news5desc">–†–æ–∑–¥—ñ–ª "–¢—É—Ä–Ω—ñ—Ä–∏" –æ–Ω–æ–≤–ª–µ–Ω–æ!</p>
      </div>
    </div>
  </div>

  <!-- –î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ -->
  <div class="disciplines-section">
    <div class="disciplines-title" data-i18n="disciplines">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</div>
    <div class="disciplines-list">
      <div class="discipline-card">
        <img src="Standoff2.jpg" alt="Standoff 2" class="discipline-img">
        <div class="discipline-name">Standoff 2</div>
      </div>
    </div>
  </div>

  <!-- –¢—É—Ä–Ω—ñ—Ä–∏ -->
  <div class="tournaments-section">
    <div class="tournaments-title" data-i18n="tournaments">–¢—É—Ä–Ω—ñ—Ä–∏</div>
    <div class="tournament-list" id="tournamentList">
      <div class="tournament-card">
        <h4>RFORZ Grad Prix Season 1</h4>
        <p data-i18n="tournament1desc">–ü–æ—á–∞—Ç–æ–∫: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥</p>
      </div>
      <div class="tournament-card">
        <h4>Quiz Battle</h4>
        <p data-i18n="tournament2desc">–ü–æ—á–∞—Ç–æ–∫: 10 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 2000‚Ç¥</p>
      </div>
    </div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item"><span>üè†</span><p data-i18n="home">–ì–æ–ª–æ–≤–Ω–∞</p></div>
    <div class="nav-item"><span>üìÑ</span><p data-i18n="rules">–ü—Ä–∞–≤–∏–ª–∞</p></div>
    <div class="nav-item"><span>üèÜ</span><p data-i18n="awards">–ù–∞–≥–æ—Ä–æ–¥–∏</p></div>
    <div class="nav-item"><span>ü§ñ</span><p data-i18n="support">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</p></div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;

    const avatar = document.getElementById("avatar");
    const profilePopup = document.getElementById("profilePopup");
    const langBtn = document.getElementById("langBtn");
    const langPopup = document.getElementById("langPopup");
    const langOptions = document.querySelectorAll(".lang-option");

    // Profile elements
    const registerBtn = document.getElementById("registerBtn");
    const profileForm = document.getElementById("profileForm");
    const doneBtn = document.getElementById("doneBtn");
    const createTeamBtn = document.getElementById("createTeamBtn");
    const successMsg = document.getElementById("successMsg");
    const tgUserInput = document.getElementById("tgUser");
    const standoffNickInput = document.getElementById("standoffNick");
    const standoffIdInput = document.getElementById("standoffId");
    const playerProfile = document.getElementById("playerProfile");
    const profileNick = document.getElementById("profileNick");
    const profileId = document.getElementById("profileId");
    const profileTg = document.getElementById("profileTg");

    // –ü–µ—Ä–µ–∫–ª–∞–¥–∏
    const translations = {
      uk: {
        home: "–ì–æ–ª–æ–≤–Ω–∞",
        rules: "–ü—Ä–∞–≤–∏–ª–∞",
        awards: "–ù–∞–≥–æ—Ä–æ–¥–∏",
        support: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞",
        wins: "–ü–µ—Ä–µ–º–æ–≥–∏",
        news: "–ù–æ–≤–∏–Ω–∏",
        tournaments: "–¢—É—Ä–Ω—ñ—Ä–∏",
        disciplines: "–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏",
        register: "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å",
        standoff_nick: "–ù—ñ–∫ –≤ Standoff",
        standoff_id: "ID –≤ Standoff",
        tg_user: "Telegram",
        done: "–ì–æ—Ç–æ–≤–æ",
        create_team: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É",
        profile_saved: "–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!",
        profile: "–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è",
        news4title: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó!",
        news4desc: "–¢–µ–ø–µ—Ä –≤ –Ω–∞—à–æ–º—É –¥–æ–¥–∞—Ç–∫—É –∑'—è–≤–∏–ª–∞—Å—è\n–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–ª—å—Å—å–∫–æ—ó –º–æ–≤–∏.",
        news5title: "–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç—É—Ä–Ω—ñ—Ä—ñ–≤!",
        news5desc: "–†–æ–∑–¥—ñ–ª \"–¢—É—Ä–Ω—ñ—Ä–∏\" –æ–Ω–æ–≤–ª–µ–Ω–æ!",
        tournament1desc: "–ü–æ—á–∞—Ç–æ–∫: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
        tournament2desc: "–ü–æ—á–∞—Ç–æ–∫: 10 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 2000‚Ç¥"
      },
      en: {
        home: "Home",
        rules: "Rules",
        awards: "Awards",
        support: "Support",
        wins: "Wins",
        news: "News",
        tournaments: "Tournaments",
        disciplines: "Disciplines",
        register: "Register",
        standoff_nick: "Standoff Nick",
        standoff_id: "Standoff ID",
        tg_user: "Telegram",
        done: "Done",
        create_team: "Create Team",
        profile_saved: "Profile saved!",
        profile: "Player Profile",
        news4title: "Polish Support!",
        news4desc: "Our app now supports\nPolish language.",
        news5title: "Tournaments Update!",
        news5desc: "The 'Tournaments' section has been updated!",
        tournament1desc: "Start: July 1. Prize fund: 5000‚Ç¥",
        tournament2desc: "Start: July 10. Prize fund: 2000‚Ç¥"
      },
      ru: {
        home: "–ì–ª–∞–≤–Ω–∞—è",
        rules: "–ü—Ä–∞–≤–∏–ª–∞",
        awards: "–ù–∞–≥—Ä–∞–¥—ã",
        support: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞",
        wins: "–ü–æ–±–µ–¥—ã",
        news: "–ù–æ–≤–æ—Å—Ç–∏",
        tournaments: "–¢—É—Ä–Ω–∏—Ä—ã",
        disciplines: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã",
        register: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
        standoff_nick: "–ù–∏–∫ –≤ Standoff",
        standoff_id: "ID –≤ Standoff",
        tg_user: "Telegram",
        done: "–ì–æ—Ç–æ–≤–æ",
        create_team: "–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
        profile_saved: "–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!",
        profile: "–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞",
        news4title: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å—Å–∫–æ–≥–æ!",
        news4desc: "–¢–µ–ø–µ—Ä—å –≤ –Ω–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ—è–≤–∏–ª–∞—Å—å\n–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.",
        news5title: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–≤!",
        news5desc: "–†–∞–∑–¥–µ–ª \"–¢—É—Ä–Ω–∏—Ä—ã\" –æ–±–Ω–æ–≤–ª–µ–Ω!",
        tournament1desc: "–°—Ç–∞—Ä—Ç: 1 –∏—é–ª—è. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
        tournament2desc: "–°—Ç–∞—Ä—Ç: 10 –∏—é–ª—è. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 2000‚Ç¥"
      },
      pl: {
        home: "Strona g≈Ç√≥wna",
        rules: "Zasady",
        awards: "Nagrody",
        support: "Wsparcie",
        wins: "Zwyciƒôstwa",
        news: "Aktualno≈õci",
        tournaments: "Turnieje",
        disciplines: "Dyscypliny",
        register: "Zarejestruj siƒô",
        standoff_nick: "Nick w Standoff",
        standoff_id: "ID w Standoff",
        tg_user: "Telegram",
        done: "Gotowe",
        create_team: "Utw√≥rz dru≈ºynƒô",
        profile_saved: "Profil zapisany!",
        profile: "Profil gracza",
        news4title: "Wsparcie polskiego!",
        news4desc: "Nasza aplikacja teraz obs≈Çuguje\njƒôzyk polski.",
        news5title: "Aktualizacja turniej√≥w!",
        news5desc: "Sekcja \"Turnieje\" zosta≈Ça zaktualizowana!",
        tournament1desc: "Start: 1 lipca. Fundusz nagr√≥d: 5000‚Ç¥",
        tournament2desc: "Start: 10 lipca. Fundusz nagr√≥d: 2000‚Ç¥"
      }
    };

    // –ü–æ–∫–∞–∑–∞—Ç–∏/—Å—Ö–æ–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
    avatar.addEventListener("click", () => {
      profilePopup.classList.toggle("active");
      langPopup.classList.remove("active");
      // –°–∫–∏–¥–∞—î–º–æ —Å—Ç–∞–Ω —Ñ–æ—Ä–º–∏ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ
      if (!localStorage.getItem('profileSaved')) {
        showRegisterState();
      } else {
        showPlayerProfile();
      }
    });

    // –ü–æ–∫–∞–∑–∞—Ç–∏/—Å—Ö–æ–≤–∞—Ç–∏ –≤–∏–±—ñ—Ä –º–æ–≤–∏
    langBtn.addEventListener("click", () => {
      langPopup.classList.toggle("active");
      profilePopup.classList.remove("active");
    });

    // –í–∏–±—ñ—Ä –º–æ–≤–∏
    langOptions.forEach(btn => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang;
        applyTranslations(lang);
        localStorage.setItem('lang', lang);
        langPopup.classList.remove("active");
      });
    });

    // –ü–µ—Ä–µ–∫–ª–∞–¥
    function applyTranslations(lang) {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.dataset.i18n;
        let text = translations[lang][key];
        if (text) {
          el.innerHTML = text.replace(/\n/g, "<br>");
        }
      });
    }

    // –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –ø—Ä–æ—Ñ—ñ–ª—é
    function showRegisterState() {
      registerBtn.style.display = "block";
      profileForm.style.display = "none";
      playerProfile.style.display = "none";
      createTeamBtn.style.display = "none";
      successMsg.style.display = "none";
    }

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è
    function showPlayerProfile() {
      registerBtn.style.display = "none";
      profileForm.style.display = "none";
      playerProfile.style.display = "block";
      createTeamBtn.style.display = "block";
      successMsg.style.display = "block";
      // –ü—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ –¥–∞–Ω—ñ –∑ localStorage
      profileNick.textContent = localStorage.getItem('profileNick') || "";
      profileId.textContent = localStorage.getItem('profileId') || "";
      profileTg.textContent = localStorage.getItem('profileTg') || "";
    }

    // –ö–ª—ñ–∫ "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å"
    registerBtn.addEventListener("click", () => {
      registerBtn.style.display = "none";
      profileForm.style.display = "flex";
      playerProfile.style.display = "none";
      createTeamBtn.style.display = "none";
      successMsg.style.display = "none";
      // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –ø–æ–ª–µ Telegram
      if (tg.initDataUnsafe?.user) {
        const user = tg.initDataUnsafe.user;
        tgUserInput.value = user.username
          ? "@" + user.username
          : (user.first_name || "") + " " + (user.last_name || "");
      } else {
        tgUserInput.value = "";
      }
    });

    // –ö–ª—ñ–∫ "–ì–æ—Ç–æ–≤–æ" (submit —Ñ–æ—Ä–º–∏)
    profileForm.addEventListener("submit", function(e) {
      e.preventDefault();
      // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–∞–Ω—ñ —É localStorage
      localStorage.setItem('profileSaved', '1');
      localStorage.setItem('profileNick', standoffNickInput.value);
      localStorage.setItem('profileId', standoffIdInput.value);
      localStorage.setItem('profileTg', tgUserInput.value);
      showPlayerProfile();
      // Google Analytics event (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è)
      gtag('event', 'register', {
        'event_category': 'Profile',
        'event_label': standoffNickInput.value
      });
    });

    // –ö–ª—ñ–∫ "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É"
    createTeamBtn.addEventListener("click", () => {
      alert("–§—É–Ω–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ —É —Ä–æ–∑—Ä–æ–±—Ü—ñ!");
      // Google Analytics event (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏)
      gtag('event', 'create_team', {
        'event_category': 'Team'
      });
    });

    // —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –º–æ–≤–∏
    window.addEventListener("DOMContentLoaded", () => {
      // –ú–æ–≤–∞
      const savedLang = localStorage.getItem('lang') || 'uk';
      applyTranslations(savedLang);
      // –ü—Ä–æ—Ñ—ñ–ª—å
      if (localStorage.getItem('profileSaved')) {
        showPlayerProfile();
      } else {
        showRegisterState();
      }
    });

    // –ó–∞–∫—Ä–∏—Ç—Ç—è popup –ø–æ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –Ω–∏–º
    document.addEventListener("click", function(e) {
      if (!profilePopup.contains(e.target) && e.target !== avatar) {
        profilePopup.classList.remove("active");
      }
      if (!langPopup.contains(e.target) && e.target !== langBtn) {
        langPopup.classList.remove("active");
      }
    });
  </script>
</body>
</html>
