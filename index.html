<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Telegram WebApp</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZN665FNYF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TZN665FNYF');
  </script>
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      padding-bottom: 60px;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      position: relative;
    }
    .lang-btn {
      font-size: 1.5rem;
      cursor: pointer;
    }
    .lang-popup {
      display: none;
      position: absolute;
      top: 60px;
      left: 16px;
      background: #333;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      flex-direction: column;
      z-index: 10;
      width: 200px; /* –ó–º–µ–Ω—à–µ–Ω–æ —à–∏—Ä–∏–Ω—É */
    }
    .lang-popup.active {
      display: flex;
    }
    .lang-option {
      background: none;
      color: #fff;
      border: none;
      padding: 8px 12px;
      text-align: left;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .lang-option:hover {
      background: #444;
    }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00bfae;
      cursor: pointer;
      object-fit: cover;
      background: #111;
      transition: box-shadow 0.2s;
    }
    .avatar-small:hover {
      box-shadow: 0 0 0 4px #00bfae55;
    }
    #profilePopup {
      top: 60px;
      left: 0px; /* Resetting left for proper positioning */
      right: auto; /* Ensure it's not sticking to right */
      max-width: 360px; /* –ó–º–µ–Ω—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É —à–∏—Ä–∏–Ω—É */
    }
    .popup {
      display: none;
      position: absolute;
      top: 60px;
      right: 0;
      background: #333;
      padding: 24px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 10;
      flex-direction: column;
      min-width: 0px;
      align-items: center;
      animation: fadeIn 0.2s;
    }
    .popup.active {
      display: flex;
    }

    .register-btn, .done-btn, .create-team-btn {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin: 8px 0;
      transition: background 0.2s;
      width: 100%;
      max-width: 220px;
    }
    .register-btn:hover, .done-btn:hover, .create-team-btn:hover {
      background: #1976d2;
    }

    .profile-form,
    .team-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 340px;
      margin-top: 8px;
      align-items: center;
    }
    .profile-form label,
    .team-form label {
      font-size: 0.95rem;
      color: #bbb;
      margin-bottom: 2px;
      align-self: flex-start;
    }
    .profile-form input,
    .team-form input[type="text"],
    .team-form input[type="file"] {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 100%;
    }
    .profile-form input[readonly] {
      background: #222;
      color: #aaa;
      border: 1px solid #444;
    }

    .player-profile {
      width: 100%;
      max-width: 220px;
      background: #222;
      border-radius: 10px;
      padding: 12px 14px;
      font-size: 1rem;
      display: none;
      color: #fff;
    }
    .player-profile-title {
      margin-bottom: 8px;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.05rem;
    }
    .player-profile-row {
      margin-bottom: 4px;
      word-break: break-word;
    }

    .success-message, .team-success-message {
      color: #00bfae;
      font-size: 1rem;
      margin: 10px 0 0 0;
      text-align: center;
    }

    .team-avatar-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #00bfae;
      margin-bottom: 8px;
      background: #111;
      display: none;
    }

    .team-player-block {
      background: #292929;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 8px;
      width: 100%;
      box-sizing: border-box;
    }
    .team-player-title {
      color: #00bfae;
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 1rem;
    }

    .notification-btn {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      position: relative;
      margin-left: 8px;
      color: #fff;
    }
    .notification-badge {
      position: absolute;
      top: 2px;
      right: 10px;
      background: #e53935;
      color: #fff;
      border-radius: 50%;
      font-size: 0.85rem;
      min-width: 20px;
      min-height: 20px;
      padding: 0 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid #222;
      box-sizing: border-box;
      z-index: 2;
    }

    #adminPopup {
      display: none;
      position: fixed;
      top: 90px;
      right: 20px;
      background: #1e1e1e;
      border: 2px solid #00bfae;
      border-radius: 16px;
      padding: 20px 24px;
      z-index: 999;
      width: 320px;
      box-shadow: 0 0 20px rgba(0, 191, 174, 0.3);
      font-family: 'Segoe UI', sans-serif;
      animation: fadeIn 0.2s ease-in-out;
    }

    #adminPopup.active {
      display: block;
    }

    #adminPopup h2 {
      color: #00bfae;
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 20px;
      text-align: center;
    }

    #adminPopup button {
      padding: 10px 16px;
      font-size: 15px;
      background-color: #2b2b2b;
      color: #eee;
      border: 1px solid #00bfae;
      border-radius: 10px;
      margin-bottom: 10px;
      width: 100%;
      transition: background 0.2s;
    }

    #adminPopup button:hover {
      background-color: #00bfae;
      color: #111;
    }

    #closeAdminModal {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #aaa;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }

    #adminMenuBtn {
      font-size: 28px;
      padding: 12px 16px;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
    .nav-item.active, .nav-item:hover {
      color: #00bfae;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .news-section,
    .disciplines-section,
    .tournaments-section {
      margin-top: 24px;
      padding: 0 16px;
    }

    .news-title,
    .disciplines-title,
    .tournaments-title {
      margin-left: 4px;
      margin-bottom: 8px;
      font-size: 1.2rem;
      font-weight: bold;
      color: #00bfae;
    }
    .news-list,
    .disciplines-list,
    .tournament-list {
      display: flex;
      overflow-x: auto;
      gap: 16px;
      padding: 12px 4px;
      scroll-snap-type: x mandatory;
    }

    .news-card,
    .tournament-card,
    .discipline-card {
      flex: 0 0 auto;
      width: 280px;
      background: #292929;
      border: 2px solid #00bfae88;
      border-radius: 12px;
      padding: 16px;
      scroll-snap-align: start;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .news-card:hover,
    .tournament-card:hover,
    .discipline-card:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 10px rgba(0, 191, 174, 0.25);
    }

    .news-card h4,
    .tournament-card h4 {
      margin-top: 0;
      color: #00bfae;
      font-size: 1.1rem;
    }

    .news-card p,
    .tournament-card p {
      font-size: 0.95rem;
      color: #ddd;
    }

    .discipline-img {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .discipline-name {
      font-weight: bold;
      text-align: center;
      font-size: 1rem;
      color: #fff;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
    .nav-item:hover {
      color: #00bfae;
    }
    .section {
      padding: 24px 16px; /* Adjusted padding for sections */
      display: none;
    }
    .section.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="lang-btn" id="langBtn">üåê</div>
    <div id="langPopup" class="lang-popup popup">
      <button class="lang-option" data-lang="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
      <button class="lang-option" data-lang="en">üá¨üáß English</button>
      <button class="lang-option" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
      <button class="lang-option" data-lang="pl">üáµüá± Polski</button>
    </div>
    <img id="avatar" class="avatar-small" src="avatar.jpg" alt="Avatar">
    <button id="notificationBtn" class="notification-btn" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">
      üîî
      <span id="notificationBadge" class="notification-badge" style="display:none;">0</span>
    </button>
    <div class="admin-menu" id="adminMenuBtn" title="–ê–¥–º—ñ–Ω-–º–µ–Ω—é">üõ°Ô∏è</div>
    <div id="adminPopup" class="adminPopup popup">
      <h2 id="adminMenuTitle" style="color:#00bfae; margin-top:0;">–ê–¥–º—ñ–Ω-–º–µ–Ω—é</h2>
      <div style="display:flex; flex-direction:column; gap:12px;">
        <button id="banUserBtn" data-i18n="ban_user">üö´ –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
        <button id="unbanUserBtn" data-i18n="unban_user">‚úÖ –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
        <button id="givePrizeBtn" data-i18n="give_prize">üèÜ –í–∏–¥–∞—Ç–∏ –ø—Ä–∏–∑</button>
        <button id="disqualifyTeamBtn" data-i18n="disqualify_team">‚ùå –î–∏—Å–∫–≤–∞–ª—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
        <button id="editBracketBtn" data-i18n="edit_bracket">üóÇÔ∏è –ú–æ–¥–µ—Ä—É–≤–∞—Ç–∏ —Å—ñ—Ç–∫—É</button>
      </div>
    </div>

    <div id="profilePopup" class="popup">
      <button class="register-btn" id="registerBtn" data-i18n="register">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>
    </div>
    <form class="profile-form" id="profileForm" style="display:none;">
      <label for="standoffNick" data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</label>
      <input type="text" id="standoffNick" name="standoffNick" required maxlength="32" autocomplete="off">
      <label for="standoffId" data-i18n="standoff_id">ID –≤ Standoff</label>
      <input type="text" id="standoffId" name="standoffId" required maxlength="32" autocomplete="off">
      <label for="tgUser" data-i18n="tg_user">Telegram</label>
      <input type="text" id="tgUser" name="tgUser" readonly>
      <button type="submit" class="done-btn" id="doneBtn" data-i18n="done">–ì–æ—Ç–æ–≤–æ</button>
    </form>

    <div class="player-profile" id="playerProfile">
      <div class="player-profile-title" data-i18n="profile">–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è</div>
      <div class="player-profile-row">
        <span data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</span>: <span id="profileNick"></span>
      </div>
      <div class="player-profile-row">
        <span data-i18n="standoff_id">ID –≤ Standoff</span>: <span id="profileId"></span>
      </div>
      <div class="player-profile-row">
        <span data-i18n="tg_user">Telegram</span>: <span id="profileTg"></span>
      </div>
    </div>

    <button class="create-team-btn" id="createTeamBtn" style="display:none;" data-i18n="create_team">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
    <div class="success-message" id="successMsg" style="display:none;" data-i18n="profile_saved">–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!</div>

    <form class="team-form" id="teamForm" style="display:none;">
      <label for="teamAvatar" data-i18n="team_avatar">–ê–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="file" id="teamAvatar" accept="image/*">
      <img id="teamAvatarPreview" class="team-avatar-preview" src="#" alt="Team Avatar">

      <label for="teamTag" data-i18n="team_tag">–¢–µ–≥ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="text" id="teamTag" maxlength="12" required data-i18n-placeholder="team_tag_ph">

      <label for="teamName" data-i18n="team_name">–ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="text" id="teamName" maxlength="32" required data-i18n-placeholder="team_name_ph">

      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player1">–ì—Ä–∞–≤–µ—Ü—å 1 (–∫–∞–ø—ñ—Ç–∞–Ω)</div>
        <input type="text" id="main1Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main1Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main1Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player2">–ì—Ä–∞–≤–µ—Ü—å 2 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
        <input type="text" id="main2Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main2Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main2Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player3">–ì—Ä–∞–≤–µ—Ü—å 3 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
        <input type="text" id="main3Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main3Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main3Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player4">–ì—Ä–∞–≤–µ—Ü—å 4 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
        <input type="text" id="main4Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main4Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main4Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player5">–ì—Ä–∞–≤–µ—Ü—å 5 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
        <input type="text" id="main5Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main5Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main5Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="spare_player1">–ì—Ä–∞–≤–µ—Ü—å 6 (–∑–∞–ø–∞—Å–Ω–∏–π)</div>
        <input type="text" id="spare1Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="spare1Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="spare1Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="spare_player2">–ì—Ä–∞–≤–µ—Ü—å 7 (–∑–∞–ø–∞—Å–Ω–∏–π)</div>
        <input type="text" id="spare2Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="spare2Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="spare2Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>

      <button type="submit" class="done-btn" id="teamDoneBtn" data-i18n="team_done">–ì–æ—Ç–æ–≤–æ</button>
    </form>

    <div class="team-success-message" id="teamSuccessMsg" style="display:none;" data-i18n="team_created">–ö–æ–º–∞–Ω–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ!</div>
  </div>

  <div id="notificationPopup" class="popup" style="right:60px; min-width:280px;">
    <div style="font-weight:bold; color:#00bfae; margin-bottom:8px;" id="notificationTitle">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
    <div id="notificationList" style="width:100%;"></div>
    <button id="clearNotificationsBtn" class="done-btn" style="margin-top:10px;">–û—á–∏—Å—Ç–∏—Ç–∏</button>
  </div>

  <div id="homeSection" class="section active">
    <div class="main-section" id="mainSection">
      <div class="news-section">
        <div class="news-title" data-i18n="news">–ù–æ–≤–∏–Ω–∏</div>
        <div class="news-list" id="newsList">
          <div class="news-card">
            <h4 data-i18n="news1title">üîî –û–Ω–æ–≤–ª–µ–Ω–Ω—è</h4>
            <p data-i18n="news1desc">–ú–∏ –¥–æ–¥–∞–ª–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ —Ç–∞ –æ–Ω–æ–≤–∏–ª–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
          </div>
          <div class="news-card">
            <h4 data-i18n="news2title">üèÜ –¢—É—Ä–Ω—ñ—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ</h4>
            <p data-i18n="news2desc">–¢–µ–ø–µ—Ä —É—Å—ñ —Ç—É—Ä–Ω—ñ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.</p>
          </div>
        </div>
      </div>

      <div class="disciplines-section">
        <div class="disciplines-title" data-i18n="disciplines">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</div>
        <div class="disciplines-list">
          <div class="discipline-card">
            <img src="Standoff2.jpg" alt="Standoff 2" class="discipline-img">
            <div class="discipline-name">Standoff 2</div>
          </div>
        </div>
      </div>

      <div class="tournaments-section">
        <div class="tournaments-title" data-i18n="tournaments">–¢—É—Ä–Ω—ñ—Ä–∏</div>
        <div class="tournament-list" id="tournamentList">
          <div class="tournament-card">
            <h4>RFORZ Grad Prix</h4>
            <p data-i18n="tournament1desc">–°—Ç–∞—Ä—Ç: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="rulesSection" class="section">
    <h2>–ü—Ä–∞–≤–∏–ª–∞ —Ç—É—Ä–Ω—ñ—Ä—É</h2>
    <details>
      <summary>–¢—É—Ä–Ω—ñ—Ä–∏ 1—Ö1</summary>
      <p>‚Ä¢ –ì—Ä–∞–≤—Ü—ñ –≥—Ä–∞—é—Ç—å –æ–¥–∏–Ω –ø—Ä–æ—Ç–∏ –æ–¥–Ω–æ–≥–æ.<br>
         ‚Ä¢ –†–∞—É–Ω–¥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –¥–æ 3 –ø–µ—Ä–µ–º–æ–≥.<br>
         ‚Ä¢ –ü–µ—Ä–µ–º–∞–≥–∞—î —Ç–æ–π, —Ö—Ç–æ –ø–µ—Ä—à–∏–π –≤–∏–≥—Ä–∞—î 3 —Ä–∞—É–Ω–¥–∏.
      </p>
    </details>
    <details>
      <summary>–¢—É—Ä–Ω—ñ—Ä–∏ 2—Ö2</summary>
      <p>‚Ä¢ –ö–æ–º–∞–Ω–¥–∏ –ø–æ 2 –≥—Ä–∞–≤—Ü—ñ.<br>
         ‚Ä¢ –£—Å–ø—ñ—Ö –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—ó —Ç–∞ –∑–ª–∞–≥–æ–¥–∂–µ–Ω–æ—ó –≥—Ä–∏.<br>
         ‚Ä¢ –ü–µ—Ä—à—ñ –¥–æ 5 –ø–µ—Ä–µ–º–æ–≥ ‚Äî –ø—Ä–æ—Ö–æ–¥—è—Ç—å –¥–∞–ª—ñ.
      </p>
    </details>
    <details>
      <summary>–¢—É—Ä–Ω—ñ—Ä–∏ 5—Ö5</summary>
      <p>‚Ä¢ –ö–ª–∞—Å–∏—á–Ω–∞ –∫–æ–º–∞–Ω–¥–Ω–∞ –≥—Ä–∞.<br>
         ‚Ä¢ –ü–æ—Ç—Ä—ñ–±–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è, –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–∏–π –¥—É—Ö.<br>
         ‚Ä¢ –ì—Ä–∞ —Ç—Ä–∏–≤–∞—î –¥–æ 10 –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø–µ—Ä–µ–º–æ–≥.
      </p>
    </details>
  </div>

  <div id="awardsSection" class="section">
    <h2 data-i18n="awards_title">–ù–∞–≥–æ—Ä–æ–¥–∏</h2>
    <p data-i18n="awards_text">–£—Å—ñ —É—á–∞—Å–Ω–∏–∫–∏ —Ñ—ñ–Ω–∞–ª—É –æ—Ç—Ä–∏–º—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –±–æ–Ω—É—Å–∏. –ü–µ—Ä–µ–º–æ–∂—Ü—ñ ‚Äî –ø—Ä–∏–∑–∏ —Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏.</p>
  </div>

  <div id="supportSection" class="section">
    <h2>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</h2>
    <p>–ù–∞–ø–∏—à–∏ @admin —É Telegram, —è–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏.</p>
  </div>

  <div class="bottom-nav">
    <div class="nav-item" data-target="homeSection"><span>üè†</span><p data-i18n="home">–ì–æ–ª–æ–≤–Ω–∞</p></div>
    <div class="nav-item" data-target="rulesSection"><span>üìÑ</span><p data-i18n="rules">–ü—Ä–∞–≤–∏–ª–∞</p></div>
    <div class="nav-item" data-target="awardsSection"><span>üèÜ</span><p data-i18n="awards">–ù–∞–≥–æ—Ä–æ–¥–∏</p></div>
    <div class="nav-item" data-target="supportSection"><span>ü§ñ</span><p data-i18n="support">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</p></div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    // Constants for admin IDs
    const ADMIN_IDS = [5806282517]; // Add your admin IDs here

    // Function to handle section navigation
    function setupNavigation() {
      const navItems = document.querySelectorAll('.nav-item');
      const sections = document.querySelectorAll('.section');

      navItems.forEach(item => {
        item.addEventListener('click', () => {
          const targetId = item.dataset.target;

          // Deactivate all sections and nav items
          sections.forEach(section => section.classList.remove('active'));
          navItems.forEach(nav => nav.classList.remove('active'));

          // Activate the target section and nav item
          document.getElementById(targetId).classList.add('active');
          item.classList.add('active');
        });
      });

      // Set initial active section (Home)
      document.getElementById('homeSection').classList.add('active');
      document.querySelector('.nav-item[data-target="homeSection"]').classList.add('active');
    }

    // Translations object
    const translations = {
      uk: {
        home: "–ì–æ–ª–æ–≤–Ω–∞",
        rules: "–ü—Ä–∞–≤–∏–ª–∞",
        awards: "–ù–∞–≥–æ—Ä–æ–¥–∏",
        support: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞",
        news: "–ù–æ–≤–∏–Ω–∏",
        news1title: "üîî –û–Ω–æ–≤–ª–µ–Ω–Ω—è",
        news1desc: "–ú–∏ –¥–æ–¥–∞–ª–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ —Ç–∞ –æ–Ω–æ–≤–∏–ª–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
        news2title: "üèÜ –¢—É—Ä–Ω—ñ—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ",
        news2desc: "–¢–µ–ø–µ—Ä —É—Å—ñ —Ç—É—Ä–Ω—ñ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.",
        disciplines: "–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏",
        tournaments: "–¢—É—Ä–Ω—ñ—Ä–∏",
        tournament1desc: "–°—Ç–∞—Ä—Ç: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
        register: "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å",
        standoff_nick: "–ù—ñ–∫ –≤ Standoff",
        standoff_id: "ID –≤ Standoff",
        tg_user: "Telegram",
        done: "–ì–æ—Ç–æ–≤–æ",
        profile: "–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è",
        create_team: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É",
        profile_saved: "–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!",
        team_avatar: "–ê–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏",
        team_tag: "–¢–µ–≥ –∫–æ–º–∞–Ω–¥–∏",
        team_tag_ph: "–í–≤–µ–¥—ñ—Ç—å —Ç–µ–≥",
        team_name: "–ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏",
        team_name_ph: "–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É",
        main_player1: "–ì—Ä–∞–≤–µ—Ü—å 1 (–∫–∞–ø—ñ—Ç–∞–Ω)",
        main_player2: "–ì—Ä–∞–≤–µ—Ü—å 2 (–æ—Å–Ω–æ–≤–Ω–∏–π)",
        main_player3: "–ì—Ä–∞–≤–µ—Ü—å 3 (–æ—Å–Ω–æ–≤–Ω–∏–π)",
        main_player4: "–ì—Ä–∞–≤–µ—Ü—å 4 (–æ—Å–Ω–æ–≤–Ω–∏–π)",
        main_player5: "–ì—Ä–∞–≤–µ—Ü—å 5 (–æ—Å–Ω–æ–≤–Ω–∏–π)",
        spare_player1: "–ì—Ä–∞–≤–µ—Ü—å 6 (–∑–∞–ø–∞—Å–Ω–∏–π)",
        spare_player2: "–ì—Ä–∞–≤–µ—Ü—å 7 (–∑–∞–ø–∞—Å–Ω–∏–π)",
        player_id_ph: "ID –≤ Standoff 2",
        player_nick_ph: "–ù—ñ–∫–Ω–µ–π–º",
        player_tg_ph: "Telegram",
        team_done: "–ì–æ—Ç–æ–≤–æ",
        team_created: "–ö–æ–º–∞–Ω–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ!",
        awards_title: "–ù–∞–≥–æ—Ä–æ–¥–∏",
        awards_text: "–£—Å—ñ —É—á–∞—Å–Ω–∏–∫–∏ —Ñ—ñ–Ω–∞–ª—É –æ—Ç—Ä–∏–º—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –±–æ–Ω—É—Å–∏. –ü–µ—Ä–µ–º–æ–∂—Ü—ñ ‚Äî –ø—Ä–∏–∑–∏ —Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏.",
        ban_user: "üö´ –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
        unban_user: "‚úÖ –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
        give_prize: "üèÜ –í–∏–¥–∞—Ç–∏ –ø—Ä–∏–∑",
        disqualify_team: "‚ùå –î–∏—Å–∫–≤–∞–ª—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É",
        edit_bracket: "üóÇÔ∏è –ú–æ–¥–µ—Ä—É–≤–∞—Ç–∏ —Å—ñ—Ç–∫—É",
        admin_menu: "–ê–¥–º—ñ–Ω-–º–µ–Ω—é",
        admin_access_denied: "–í–∏ –Ω–µ –º–∞—î—Ç–µ –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–¥–º—ñ–Ω-–º–µ–Ω—é.",
        no_notifications: "–£ –≤–∞—Å –Ω–µ–º–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω—å."
      },
      en: {
        home: "Home",
        rules: "Rules",
        awards: "Awards",
        support: "Support",
        news: "News",
        news1title: "üîî Update",
        news1desc: "We have added English language support and updated the interface.",
        news2title: "üèÜ Tournaments updated",
        news2desc: "All tournaments are now available on a separate page.",
        disciplines: "Disciplines",
        tournaments: "Tournaments",
        tournament1desc: "Start: July 1. Prize pool: 5000‚Ç¥",
        register: "Register",
        standoff_nick: "Standoff Nick",
        standoff_id: "Standoff ID",
        tg_user: "Telegram",
        done: "Done",
        profile: "Player Profile",
        create_team: "Create Team",
        profile_saved: "Profile saved!",
        team_avatar: "Team Avatar",
        team_tag: "Team Tag",
        team_tag_ph: "Enter tag",
        team_name: "Team Name",
        team_name_ph: "Enter name",
        main_player1: "Player 1 (Captain)",
        main_player2: "Player 2 (Main)",
        main_player3: "Player 3 (Main)",
        main_player4: "Player 4 (Main)",
        main_player5: "Player 5 (Main)",
        spare_player1: "Player 6 (Substitute)",
        spare_player2: "Player 7 (Substitute)",
        player_id_ph: "Standoff 2 ID",
        player_nick_ph: "Nickname",
        player_tg_ph: "Telegram",
        team_done: "Done",
        team_created: "Team created!",
        awards_title: "Awards",
        awards_text: "All finalists receive special bonuses. Winners receive prizes and certificates.",
        ban_user: "üö´ Ban User",
        unban_user: "‚úÖ Unban User",
        give_prize: "üèÜ Give Prize",
        disqualify_team: "‚ùå Disqualify Team",
        edit_bracket: "üóÇÔ∏è Moderate Bracket",
        admin_menu: "Admin Menu",
        admin_access_denied: "You do not have access to the admin menu.",
        no_notifications: "You have no notifications."
      },
      ru: {
        home: "–ì–ª–∞–≤–Ω–∞—è",
        rules: "–ü—Ä–∞–≤–∏–ª–∞",
        awards: "–ù–∞–≥—Ä–∞–¥—ã",
        support: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞",
        news: "–ù–æ–≤–æ—Å—Ç–∏",
        news1title: "üîî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ",
        news1desc: "–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏ –æ–±–Ω–æ–≤–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
        news2title: "üèÜ –¢—É—Ä–Ω–∏—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã",
        news2desc: "–¢–µ–ø–µ—Ä—å –≤—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.",
        disciplines: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã",
        tournaments: "–¢—É—Ä–Ω–∏—Ä—ã",
        tournament1desc: "–°—Ç–∞—Ä—Ç: 1 –∏—é–ª—è. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
        register: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
        standoff_nick: "–ù–∏–∫ –≤ Standoff",
        standoff_id: "ID –≤ Standoff",
        tg_user: "Telegram",
        done: "–ì–æ—Ç–æ–≤–æ",
        profile: "–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞",
        create_team: "–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
        profile_saved: "–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!",
        team_avatar: "–ê–≤–∞—Ç–∞—Ä –∫–æ–º–∞–Ω–¥—ã",
        team_tag: "–¢–µ–≥ –∫–æ–º–∞–Ω–¥—ã",
        team_tag_ph: "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥",
        team_name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã",
        team_name_ph: "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
        main_player1: "–ò–≥—Ä–æ–∫ 1 (–∫–∞–ø–∏—Ç–∞–Ω)",
        main_player2: "–ò–≥—Ä–æ–∫ 2 (–æ—Å–Ω–æ–≤–Ω–æ–π)",
        main_player3: "–ò–≥—Ä–æ–∫ 3 (–æ—Å–Ω–æ–≤–Ω–æ–π)",
        main_player4: "–ò–≥—Ä–æ–∫ 4 (–æ—Å–Ω–æ–≤–Ω–æ–π)",
        main_player5: "–ò–≥—Ä–æ–∫ 5 (–æ—Å–Ω–æ–≤–Ω–æ–π)",
        spare_player1: "–ò–≥—Ä–æ–∫ 6 (–∑–∞–ø–∞—Å–Ω–æ–π)",
        spare_player2: "–ò–≥—Ä–æ–∫ 7 (–∑–∞–ø–∞—Å–Ω–æ–π)",
        player_id_ph: "ID –≤ Standoff 2",
        player_nick_ph: "–ù–∏–∫–Ω–µ–π–º",
        player_tg_ph: "Telegram",
        team_done: "–ì–æ—Ç–æ–≤–æ",
        team_created: "–ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–Ω–∞!",
        awards_title: "–ù–∞–≥—Ä–∞–¥—ã",
        awards_text: "–í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ñ–∏–Ω–∞–ª–∞ –ø–æ–ª—É—á–∞—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã. –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏ ‚Äî –ø—Ä–∏–∑—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.",
        ban_user: "üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        unban_user: "‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        give_prize: "üèÜ –í—ã–¥–∞—Ç—å –ø—Ä–∏–∑",
        disqualify_team: "‚ùå –î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
        edit_bracket: "üóÇÔ∏è –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç–∫—É",
        admin_menu: "–ê–¥–º–∏–Ω-–º–µ–Ω—é",
        admin_access_denied: "–í—ã –Ω–µ –∏–º–µ–µ—Ç–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–º–µ–Ω—é.",
        no_notifications: "–£ –≤–∞—Å –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π."
      },
      pl: {
        home: "Strona g≈Ç√≥wna",
        rules: "Zasady",
        awards: "Nagrody",
        support: "Wsparcie",
        news: "Aktualno≈õci",
        news1title: "üîî Aktualizacja",
        news1desc: "Dodali≈õmy obs≈Çugƒô jƒôzyka angielskiego i zaktualizowali≈õmy interfejs.",
        news2title: "üèÜ Turnieje zaktualizowane",
        news2desc: "Wszystkie turnieje sƒÖ teraz dostƒôpne na osobnej stronie.",
        disciplines: "Dyscypliny",
        tournaments: "Turnieje",
        tournament1desc: "Start: 1 lipca. Pula nagr√≥d: 5000‚Ç¥",
        register: "Zarejestruj siƒô",
        standoff_nick: "Nick w Standoff",
        standoff_id: "ID w Standoff",
        tg_user: "Telegram",
        done: "Gotowe",
        profile: "Profil Gracza",
        create_team: "Stw√≥rz zesp√≥≈Ç",
        profile_saved: "Profil zapisany!",
        team_avatar: "Awatar zespo≈Çu",
        team_tag: "Tag zespo≈Çu",
        team_tag_ph: "Wprowad≈∫ tag",
        team_name: "Nazwa zespo≈Çu",
        team_name_ph: "Wprowad≈∫ nazwƒô",
        main_player1: "Gracz 1 (Kapitan)",
        main_player2: "Gracz 2 (G≈Ç√≥wny)",
        main_player3: "Gracz 3 (G≈Ç√≥wny)",
        main_player4: "Gracz 4 (G≈Ç√≥wny)",
        main_player5: "Gracz 5 (G≈Ç√≥wny)",
        spare_player1: "Gracz 6 (Rezerwowy)",
        spare_player2: "Gracz 7 (Rezerwowy)",
        player_id_ph: "ID w Standoff 2",
        player_nick_ph: "Nick",
        player_tg_ph: "Telegram",
        team_done: "Gotowe",
        team_created: "Zesp√≥≈Ç stworzony!",
        awards_title: "Nagrody",
        awards_text: "Wszyscy finali≈õci otrzymujƒÖ specjalne bonusy. Zwyciƒôzcy ‚Äî nagrody i certyfikaty.",
        ban_user: "üö´ Zablokuj u≈ºytkownika",
        unban_user: "‚úÖ Odblokuj u≈ºytkownika",
        give_prize: "üèÜ Przyznaj nagrodƒô",
        disqualify_team: "‚ùå Zdyskwalifikuj zesp√≥≈Ç",
        edit_bracket: "üóÇÔ∏è Moderuj drabinkƒô",
        admin_menu: "Menu administratora",
        admin_access_denied: "Nie masz dostƒôpu do menu administratora.",
        no_notifications: "Nie masz powiadomie≈Ñ."
      }
    };

    let currentLang = 'uk'; // Default language

    function applyTranslation(lang) {
      currentLang = lang;
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.dataset.i18n;
        if (translations[lang] && translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
      // Update placeholders
      document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.dataset.i18nPlaceholder; // Corrected to camelCase
        if (translations[lang] && translations[lang][key]) {
          element.placeholder = translations[lang][key];
        }
      });
      // Update specific elements if needed
      if (lang === 'uk') {
        document.getElementById('adminMenuTitle').textContent = '–ê–¥–º—ñ–Ω-–º–µ–Ω—é';
        document.getElementById('supportSection').querySelector('h2').textContent = '–ü—ñ–¥—Ç—Ä–∏–º–∫–∞';
        document.getElementById('rulesSection').querySelector('h2').textContent = '–ü—Ä–∞–≤–∏–ª–∞ —Ç—É—Ä–Ω—ñ—Ä—É';
        document.querySelector('#rulesSection details:nth-child(2) summary').textContent = '–¢—É—Ä–Ω—ñ—Ä–∏ 1—Ö1';
        document.querySelector('#rulesSection details:nth-child(3) summary').textContent = '–¢—É—Ä–Ω—ñ—Ä–∏ 2—Ö2';
        document.querySelector('#rulesSection details:nth-child(4) summary').textContent = '–¢—É—Ä–Ω—ñ—Ä–∏ 5—Ö5';

      } else if (lang === 'en') {
        document.getElementById('adminMenuTitle').textContent = 'Admin Menu';
        document.getElementById('supportSection').querySelector('h2').textContent = 'Support';
        document.getElementById('rulesSection').querySelector('h2').textContent = 'Tournament Rules';
        document.querySelector('#rulesSection details:nth-child(2) summary').textContent = '1v1 Tournaments';
        document.querySelector('#rulesSection details:nth-child(3) summary').textContent = '2v2 Tournaments';
        document.querySelector('#rulesSection details:nth-child(4) summary').textContent = '5v5 Tournaments';

      } else if (lang === 'ru') {
        document.getElementById('adminMenuTitle').textContent = '–ê–¥–º–∏–Ω-–º–µ–Ω—é';
        document.getElementById('supportSection').querySelector('h2').textContent = '–ü–æ–¥–¥–µ—Ä–∂–∫–∞';
        document.getElementById('rulesSection').querySelector('h2').textContent = '–ü—Ä–∞–≤–∏–ª–∞ —Ç—É—Ä–Ω–∏—Ä–∞';
        document.querySelector('#rulesSection details:nth-child(2) summary').textContent = '–¢—É—Ä–Ω–∏—Ä—ã 1—Ö1';
        document.querySelector('#rulesSection details:nth-child(3) summary').textContent = '–¢—É—Ä–Ω–∏—Ä—ã 2—Ö2';
        document.querySelector('#rulesSection details:nth-child(4) summary').textContent = '–¢—É—Ä–Ω–∏—Ä—ã 5—Ö5';

      } else if (lang === 'pl') {
        document.getElementById('adminMenuTitle').textContent = 'Menu administratora';
        document.getElementById('supportSection').querySelector('h2').textContent = 'Wsparcie';
        document.getElementById('rulesSection').querySelector('h2').textContent = 'Zasady turnieju';
        document.querySelector('#rulesSection details:nth-child(2) summary').textContent = 'Turnieje 1x1';
        document.querySelector('#rulesSection details:nth-child(3) summary').textContent = 'Turnieje 2x2';
        document.querySelector('#rulesSection details:nth-child(4) summary').textContent = 'Turnieje 5x5';
      }
      // Update notification message if popup is active
      if (notificationPopup.classList.contains('active')) {
        renderNotifications();
      }
    }

    // Language popup functionality
    const langBtn = document.getElementById('langBtn');
    const langPopup = document.getElementById('langPopup');
    const langOptions = document.querySelectorAll('.lang-option');
    const profilePopup = document.getElementById('profilePopup');
    const notificationPopup = document.getElementById('notificationPopup');
    const adminPopup = document.getElementById('adminPopup');


    // Function to close all top-level popups
    function closeAllPopups() {
      langPopup.classList.remove('active');
      profilePopup.classList.remove('active');
      notificationPopup.classList.remove('active');
      adminPopup.classList.remove('active');
      // Also hide profile and team forms if they are open
      profileForm.style.display = 'none';
      teamForm.style.display = 'none';
      playerProfile.style.display = 'none';
      createTeamBtn.style.display = 'none';
      successMsg.style.display = 'none';
      teamSuccessMsg.style.display = 'none';
    }


    langBtn.addEventListener('click', (event) => {
      closeAllPopups(); // Close other popups
      langPopup.classList.toggle('active');
      event.stopPropagation(); // Prevent document click from immediately closing
    });

    langOptions.forEach(option => {
      option.addEventListener('click', () => {
        const lang = option.dataset.lang;
        applyTranslation(lang);
        langPopup.classList.remove('active');
      });
    });

    // Dummy Telegram WebApp (if not already loaded)
    if (window.Telegram && window.Telegram.WebApp) {
      Telegram.WebApp.ready();
      const tgUser = document.getElementById('tgUser');
      if (Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
        tgUser.value = `@${Telegram.WebApp.initDataUnsafe.user.username || 'user'}`;
      } else {
        tgUser.value = 'Telegram User (Demo)'; // Fallback for local testing
      }
    } else {
        // Mock Telegram WebApp for local development if not running inside Telegram
        window.Telegram = {
            WebApp: {
                ready: () => console.log('Telegram WebApp is ready (mocked).'),
                initDataUnsafe: {
                    user: { id: 12345, username: 'mock_user' } // Mock user for testing, change ID for admin test
                }
            }
        };
        const tgUser = document.getElementById('tgUser');
        if (Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
          tgUser.value = `@${Telegram.WebApp.initDataUnsafe.user.username || 'user'}`;
        } else {
          tgUser.value = 'Telegram User (Demo)';
        }
    }


    // Profile Popup, Forms, and Notifications functionalities
    const avatar = document.getElementById('avatar');
    const registerBtn = document.getElementById('registerBtn');
    const profileForm = document.getElementById('profileForm');
    const doneBtn = document.getElementById('doneBtn');
    const playerProfile = document.getElementById('playerProfile');
    const createTeamBtn = document.getElementById('createTeamBtn');
    const successMsg = document.getElementById('successMsg');
    const teamForm = document.getElementById('teamForm');
    const teamAvatar = document.getElementById('teamAvatar');
    const teamAvatarPreview = document.getElementById('teamAvatarPreview');
    const teamDoneBtn = document.getElementById('teamDoneBtn');
    const teamSuccessMsg = document.getElementById('teamSuccessMsg');

    // Toggle Profile Popup
    avatar.addEventListener('click', (event) => {
      closeAllPopups(); // Close other popups
      profilePopup.classList.toggle('active');
      event.stopPropagation();
    });

    // Register button click
    registerBtn.addEventListener('click', () => {
      profilePopup.style.display = 'none'; // Hide the register button itself
      profileForm.style.display = 'flex'; // Show the form
      playerProfile.style.display = 'none';
      createTeamBtn.style.display = 'none';
      successMsg.style.display = 'none';
      teamForm.style.display = 'none'; // Ensure team form is hidden
      teamSuccessMsg.style.display = 'none'; // Ensure team success msg is hidden

      // Pre-fill Telegram username if available from WebApp
      if (window.Telegram && window.Telegram.WebApp && Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
        document.getElementById('tgUser').value = `@${Telegram.WebApp.initDataUnsafe.user.username || 'user'}`;
      }
      profilePopup.classList.add('active'); // Keep the main profile popup div active to contain the form
    });

    // Profile Form submission
    profileForm.addEventListener('submit', (event) => {
      event.preventDefault();
      const standoffNick = document.getElementById('standoffNick').value;
      const standoffId = document.getElementById('standoffId').value;
      const tgUser = document.getElementById('tgUser').value;

      // Display profile info
      document.getElementById('profileNick').textContent = standoffNick;
      document.getElementById('profileId').textContent = standoffId;
      document.getElementById('profileTg').textContent = tgUser;

      profileForm.style.display = 'none';
      playerProfile.style.display = 'block';
      createTeamBtn.style.display = 'block';
      successMsg.style.display = 'block';
      // profilePopup.classList.add('active'); // Keep popup active to show profile and create team button
      // No need to explicitly add active, as it should already be there from avatar click
      // if it was opened from avatar click, or will be made active if register was clicked without avatar click
    });

    // Create Team button click
    createTeamBtn.addEventListener('click', () => {
      profilePopup.classList.remove('active'); // Close profile popup first
      profileForm.style.display = 'none';
      playerProfile.style.display = 'none';
      createTeamBtn.style.display = 'none';
      successMsg.style.display = 'none';
      teamForm.style.display = 'flex';
      profilePopup.classList.add('active'); // Re-activate profilePopup to contain the team form
    });

    // Team Avatar preview
    teamAvatar.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          teamAvatarPreview.src = e.target.result;
          teamAvatarPreview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        teamAvatarPreview.src = '#';
        teamAvatarPreview.style.display = 'none';
      }
    });

    // Team Form submission
    teamForm.addEventListener('submit', (event) => {
      event.preventDefault();
      // Collect all team data here
      const teamData = {
        teamTag: document.getElementById('teamTag').value,
        teamName: document.getElementById('teamName').value,
        player1: {
          id: document.getElementById('main1Id').value,
          nick: document.getElementById('main1Nick').value,
          tg: document.getElementById('main1Tg').value,
        },
        player2: {
          id: document.getElementById('main2Id').value,
          nick: document.getElementById('main2Nick').value,
          tg: document.getElementById('main2Tg').value,
        },
        player3: {
          id: document.getElementById('main3Id').value,
          nick: document.getElementById('main3Nick').value,
          tg: document.getElementById('main3Tg').value,
        },
        player4: {
          id: document.getElementById('main4Id').value,
          nick: document.getElementById('main4Nick').value,
          tg: document.getElementById('main4Tg').value,
        },
        player5: {
          id: document.getElementById('main5Id').value,
          nick: document.getElementById('main5Nick').value,
          tg: document.getElementById('main5Tg').value,
        },
        spare1: {
          id: document.getElementById('spare1Id').value,
          nick: document.getElementById('spare1Nick').value,
          tg: document.getElementById('spare1Tg').value,
        },
        spare2: {
          id: document.getElementById('spare2Id').value,
          nick: document.getElementById('spare2Nick').value,
          tg: document.getElementById('spare2Tg').value,
        },
        // Add team avatar file if needed (FileReader will give base64 string)
        teamAvatar: teamAvatarPreview.src // This will be the base64 string
      };

      console.log('Team Data:', teamData);

      teamForm.style.display = 'none';
      teamSuccessMsg.style.display = 'block';
      profilePopup.classList.add('active'); // Keep popup active to show success message
    });

    // Notification Popup functionality
    const notificationBtn = document.getElementById('notificationBtn');
    const notificationBadge = document.getElementById('notificationBadge');
    const notificationList = document.getElementById('notificationList');
    const clearNotificationsBtn = document.getElementById('clearNotificationsBtn');

    // Dummy notifications
    let notifications = [
      { id: 1, message: '–í—ñ—Ç–∞—î–º–æ! –í–∞—à –ø—Ä–æ—Ñ—ñ–ª—å —É—Å–ø—ñ—à–Ω–æ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ.', read: false },
      { id: 2, message: '–ù–æ–≤–∏–π —Ç—É—Ä–Ω—ñ—Ä "RFORZ Grad Prix" —Ä–æ–∑–ø–æ—á–∞–≤—Å—è!', read: false },
      { id: 3, message: '–í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—É —Å—Ö–≤–∞–ª–µ–Ω–∞.', read: true },
    ];

    function updateNotificationBadge() {
      const unreadCount = notifications.filter(n => !n.read).length;
      if (unreadCount > 0) {
        notificationBadge.textContent = unreadCount;
        notificationBadge.style.display = 'flex';
      } else {
        notificationBadge.style.display = 'none';
      }
    }

    function renderNotifications() {
      notificationList.innerHTML = '';
      if (notifications.length === 0) {
        const noNotifications = document.createElement('p');
        noNotifications.textContent = translations[currentLang]?.['no_notifications'] || (currentLang === 'uk' ? '–£ –≤–∞—Å –Ω–µ–º–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω—å.' : currentLang === 'en' ? 'You have no notifications.' : currentLang === 'ru' ? '–£ –≤–∞—Å –Ω–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.' : 'Nie masz powiadomie≈Ñ.');
        noNotifications.style.color = '#bbb';
        noNotifications.style.textAlign = 'center';
        notificationList.appendChild(noNotifications);
        clearNotificationsBtn.style.display = 'none';
        return;
      }
      clearNotificationsBtn.style.display = 'block';

      notifications.forEach(notification => {
        const notificationItem = document.createElement('div');
        notificationItem.classList.add('notification-item');
        if (!notification.read) {
          notificationItem.style.fontWeight = 'bold';
          notificationItem.style.color = '#fff';
        } else {
          notificationItem.style.color = '#bbb';
        }
        notificationItem.style.padding = '8px 0';
        notificationItem.style.borderBottom = '1px solid #444';
        notificationItem.textContent = notification.message;
        notificationItem.addEventListener('click', () => {
          notification.read = true;
          updateNotificationBadge();
          renderNotifications();
          // In a real app, you might navigate to a related page or show details
        });
        notificationList.appendChild(notificationItem);
      });
      updateNotificationBadge();
    }

    notificationBtn.addEventListener('click', (event) => {
      closeAllPopups(); // Close other popups
      notificationPopup.classList.toggle('active');
      renderNotifications();
      event.stopPropagation();
    });

    clearNotificationsBtn.addEventListener('click', () => {
      notifications = [];
      renderNotifications();
      notificationPopup.classList.remove('active');
    });

    // Close all popups if clicking outside of any popup or their trigger buttons
    document.addEventListener('click', (event) => {
      const clickedElement = event.target;
      const isInsideAnyPopup = langPopup.contains(clickedElement) ||
                               profilePopup.contains(clickedElement) ||
                               notificationPopup.contains(clickedElement) ||
                               adminPopup.contains(clickedElement);
      const isTriggerButton = langBtn.contains(clickedElement) ||
                              avatar.contains(clickedElement) ||
                              notificationBtn.contains(clickedElement) ||
                              adminMenuBtn.contains(clickedElement);

      if (!isInsideAnyPopup && !isTriggerButton) {
        closeAllPopups();
      }
    });


    // Admin Menu functionality
    const adminMenuBtn = document.getElementById('adminMenuBtn');

    adminMenuBtn.addEventListener('click', (event) => {
      const userId = Telegram.WebApp.initDataUnsafe?.user?.id; // Get user ID
      if (!ADMIN_IDS.includes(userId)) {
        alert(translations[currentLang]?.['admin_access_denied'] || '–í–∏ –Ω–µ –º–∞—î—Ç–µ –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–¥–º—ñ–Ω-–º–µ–Ω—é.');
        event.stopPropagation(); // Stop propagation to prevent closing other popups (if any)
        return;
      }

      closeAllPopups(); // Close other popups
      adminPopup.classList.toggle('active');
      event.stopPropagation();
    });

    // Dummy admin functions
    document.getElementById('banUserBtn').addEventListener('click', () => {
      alert(translations[currentLang]?.['ban_user_alert'] || '–§—É–Ω–∫—Ü—ñ—è "–ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞" (—Ä–æ–∑—Ä–æ–±–∫–∞)');
      adminPopup.classList.remove('active');
    });
    document.getElementById('unbanUserBtn').addEventListener('click', () => {
      alert(translations[currentLang]?.['unban_user_alert'] || '–§—É–Ω–∫—Ü—ñ—è "–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞" (—Ä–æ–∑—Ä–æ–±–∫–∞)');
      adminPopup.classList.remove('active');
    });
    document.getElementById('givePrizeBtn').addEventListener('click', () => {
      alert(translations[currentLang]?.['give_prize_alert'] || '–§—É–Ω–∫—Ü—ñ—è "–í–∏–¥–∞—Ç–∏ –ø—Ä–∏–∑" (—Ä–æ–∑—Ä–æ–±–∫–∞)');
      adminPopup.classList.remove('active');
    });
    document.getElementById('disqualifyTeamBtn').addEventListener('click', () => {
      alert(translations[currentLang]?.['disqualify_team_alert'] || '–§—É–Ω–∫—Ü—ñ—è "–î–∏—Å–∫–≤–∞–ª—ñ—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É" (—Ä–æ–∑—Ä–æ–±–∫–∞)');
      adminPopup.classList.remove('active');
    });
    document.getElementById('editBracketBtn').addEventListener('click', () => {
      alert(translations[currentLang]?.['edit_bracket_alert'] || '–§—É–Ω–∫—Ü—ñ—è "–ú–æ–¥–µ—Ä—É–≤–∞—Ç–∏ —Å—ñ—Ç–∫—É" (—Ä–æ–∑—Ä–æ–±–∫–∞)');
      adminPopup.classList.remove('active');
    });


    // Initial setup on load
    document.addEventListener('DOMContentLoaded', () => {
      applyTranslation(currentLang); // Apply default language
      setupNavigation(); // Setup navigation on load
      updateNotificationBadge(); // Initialize notification badge
      // Ensure forms are hidden initially if not meant to be shown by default
      profileForm.style.display = 'none';
      teamForm.style.display = 'none';
    });
  </script>
</body>
</html>
