<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Telegram WebApp</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TZN665FNYF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TZN665FNYF');
  </script>
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      padding-bottom: 60px;
    }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      position: relative;
    }
    .lang-btn {
      font-size: 1.5rem;
      cursor: pointer;
    }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00bfae;
      cursor: pointer;
      object-fit: cover;
      background: #111;
      transition: box-shadow 0.2s;
    }
    .avatar-small:hover {
      box-shadow: 0 0 0 4px #00bfae55;
    }

    .popup {
      display: none;
      position: absolute;
      top: 60px;
      right: 0;
      background: #333;
      padding: 24px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 10;
      flex-direction: column;
      min-width: 260px;
      align-items: center;
      animation: fadeIn 0.2s;
    }
    .popup.active {
      display: flex;
    }

    .register-btn, .done-btn, .create-team-btn {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin: 8px 0;
      transition: background 0.2s;
      width: 100%;
      max-width: 220px;
    }
    .register-btn:hover, .done-btn:hover, .create-team-btn:hover {
      background: #1976d2;
    }

    .profile-form,
    .team-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 340px;
      margin-top: 8px;
      align-items: center;
    }
    .profile-form label,
    .team-form label {
      font-size: 0.95rem;
      color: #bbb;
      margin-bottom: 2px;
      align-self: flex-start;
    }
    .profile-form input,
    .team-form input[type="text"],
    .team-form input[type="file"] {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 100%;
    }
    .profile-form input[readonly] {
      background: #222;
      color: #aaa;
      border: 1px solid #444;
    }

    .player-profile {
      width: 100%;
      max-width: 220px;
      background: #222;
      border-radius: 10px;
      padding: 12px 14px;
      font-size: 1rem;
      display: none;
      color: #fff;
    }
    .player-profile-title {
      margin-bottom: 8px;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.05rem;
    }
    .player-profile-row {
      margin-bottom: 4px;
      word-break: break-word;
    }

    .success-message, .team-success-message {
      color: #00bfae;
      font-size: 1rem;
      margin: 10px 0 0 0;
      text-align: center;
    }

    .team-avatar-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #00bfae;
      margin-bottom: 8px;
      background: #111;
      display: none;
    }

    .team-player-block {
      background: #292929;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 8px;
      width: 100%;
      box-sizing: border-box;
    }
    .team-player-title {
      color: #00bfae;
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 1rem;
    }

    .notification-btn {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      position: relative;
      margin-left: 8px;
      color: #fff;
    }
    .notification-badge {
      position: absolute;
      top: 2px;
      right: 2px;
      background: #e53935;
      color: #fff;
      border-radius: 50%;
      font-size: 0.85rem;
      min-width: 20px;
      min-height: 20px;
      padding: 0 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid #222;
      box-sizing: border-box;
      z-index: 2;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1.2rem;
      margin-bottom: 2px;
    }
    .nav-item.active, .nav-item:hover {
      color: #00bfae;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
.news-section,
.disciplines-section,
.tournaments-section {
  margin-top: 24px;
  padding: 0 16px;
}

.news-title,
.disciplines-title,
.tournaments-title {
  margin-left: 4px;
  margin-bottom: 8px;
  font-size: 1.2rem;
  font-weight: bold;
  color: #00bfae;
}
.news-list,
.disciplines-list,
.tournament-list {
  display: flex;
  overflow-x: auto;
  gap: 16px;
  padding: 12px 4px;
  scroll-snap-type: x mandatory;
}

.news-card,
.tournament-card,
.discipline-card {
  flex: 0 0 auto;
  width: 280px;
  background: #292929;
  border: 2px solid #00bfae88;
  border-radius: 12px;
  padding: 16px;
  scroll-snap-align: start;
  transition: transform 0.2s, box-shadow 0.2s;
}

.news-card:hover,
.tournament-card:hover,
.discipline-card:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 10px rgba(0, 191, 174, 0.25);
}

.news-card h4,
.tournament-card h4 {
  margin-top: 0;
  color: #00bfae;
  font-size: 1.1rem;
}

.news-card p,
.tournament-card p {
  font-size: 0.95rem;
  color: #ddd;
}

.discipline-img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 8px;
}

.discipline-name {
  font-weight: bold;
  text-align: center;
  font-size: 1rem;
  color: #fff;
}
</style>
</head>
<body>
  <div class="topbar">
    <div class="lang-btn" id="langBtn">üåê</div>
    <img id="avatar" class="avatar-small" src="avatar.jpg" alt="Avatar">
    <button id="notificationBtn" class="notification-btn" title="–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è">
      üîî
      <span id="notificationBadge" class="notification-badge" style="display:none;">0</span>
    </button>
    <button id="adminMenuBtn" title="–ê–¥–º—ñ–Ω-–º–µ–Ω—é">üõ°Ô∏è</button>
  </div>
  <div id="profilePopup" class="popup">
    <button class="register-btn" id="registerBtn" data-i18n="register">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å</button>

    <form class="profile-form" id="profileForm" style="display:none;">
      <label for="standoffNick" data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</label>
      <input type="text" id="standoffNick" name="standoffNick" required maxlength="32" autocomplete="off">
      <label for="standoffId" data-i18n="standoff_id">ID –≤ Standoff</label>
      <input type="text" id="standoffId" name="standoffId" required maxlength="32" autocomplete="off">
      <label for="tgUser" data-i18n="tg_user">Telegram</label>
      <input type="text" id="tgUser" name="tgUser" readonly>
      <button type="submit" class="done-btn" id="doneBtn" data-i18n="done">–ì–æ—Ç–æ–≤–æ</button>
    </form>

    <div class="player-profile" id="playerProfile">
      <div class="player-profile-title" data-i18n="profile">–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è</div>
      <div class="player-profile-row">
        <span data-i18n="standoff_nick">–ù—ñ–∫ –≤ Standoff</span>: <span id="profileNick"></span>
      </div>
      <div class="player-profile-row">
        <span data-i18n="standoff_id">ID –≤ Standoff</span>: <span id="profileId"></span>
      </div>
      <div class="player-profile-row">
        <span data-i18n="tg_user">Telegram</span>: <span id="profileTg"></span>
      </div>
    </div>

    <button class="create-team-btn" id="createTeamBtn" style="display:none;" data-i18n="create_team">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É</button>
    <div class="success-message" id="successMsg" style="display:none;" data-i18n="profile_saved">–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!</div>

    <form class="team-form" id="teamForm" style="display:none;">
      <label for="teamAvatar" data-i18n="team_avatar">–ê–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="file" id="teamAvatar" accept="image/*">
      <img id="teamAvatarPreview" class="team-avatar-preview" src="#" alt="Team Avatar">

      <label for="teamTag" data-i18n="team_tag">–¢–µ–≥ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="text" id="teamTag" maxlength="12" required data-i18n-placeholder="team_tag_ph">

      <label for="teamName" data-i18n="team_name">–ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏</label>
      <input type="text" id="teamName" maxlength="32" required data-i18n-placeholder="team_name_ph">

      <!-- –ì—Ä–∞–≤–µ—Ü—å 1 -->
      <div class="team-player-block">
        <div class="team-player-title" data-i18n="main_player1">–ì—Ä–∞–≤–µ—Ü—å 1 (–æ—Å–Ω–æ–≤–Ω–∏–π)</div>
        <input type="text" id="main1Id" placeholder="ID –≤ Standoff 2" required data-i18n-placeholder="player_id_ph">
        <input type="text" id="main1Nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" required data-i18n-placeholder="player_nick_ph">
        <input type="text" id="main1Tg" placeholder="Telegram" required data-i18n-placeholder="player_tg_ph">
      </div>

      <!-- –ú–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ —â–µ 4 –æ—Å–Ω–æ–≤–Ω–∏—Ö —ñ 2 –∑–∞–ø–∞—Å–Ω–∏—Ö –∑–∞ —Ü–∏–º —à–∞–±–ª–æ–Ω–æ–º -->

      <button type="submit" class="done-btn" id="teamDoneBtn" data-i18n="team_done">–ì–æ—Ç–æ–≤–æ</button>
    </form>

    <div class="team-success-message" id="teamSuccessMsg" style="display:none;" data-i18n="team_created">–ö–æ–º–∞–Ω–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ!</div>
  </div>

  <!-- –í–∏–±—ñ—Ä –º–æ–≤–∏ -->
  <div id="langPopup" class="popup">
    <button class="lang-option" data-lang="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
    <button class="lang-option" data-lang="en">English</button>
  </div>

  <!-- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è -->
  <div id="notificationPopup" class="popup" style="right:60px; min-width:280px;">
    <div style="font-weight:bold; color:#00bfae; margin-bottom:8px;" id="notificationTitle">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è</div>
    <div id="notificationList" style="width:100%;"></div>
    <button id="clearNotificationsBtn" class="done-btn" style="margin-top:10px;">–û—á–∏—Å—Ç–∏—Ç–∏</button>
  </div>
  <!-- –ì–û–õ–û–í–ù–ê -->
  <div class="main-section active" id="mainSection">
    <div class="news-section">
      <div class="news-title" data-i18n="news">–ù–æ–≤–∏–Ω–∏</div>
      <div class="news-list" id="newsList">
        <div class="news-card">
          <h4 data-i18n="news1title">üîî –û–Ω–æ–≤–ª–µ–Ω–Ω—è</h4>
          <p data-i18n="news1desc">–ú–∏ –¥–æ–¥–∞–ª–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ —Ç–∞ –æ–Ω–æ–≤–∏–ª–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
        </div>
        <div class="news-card">
          <h4 data-i18n="news2title">üèÜ –¢—É—Ä–Ω—ñ—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ</h4>
          <p data-i18n="news2desc">–¢–µ–ø–µ—Ä —É—Å—ñ —Ç—É—Ä–Ω—ñ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.</p>
        </div>
      </div>
    </div>

    <div class="disciplines-section">
      <div class="disciplines-title" data-i18n="disciplines">–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏</div>
      <div class="disciplines-list">
        <div class="discipline-card">
          <img src="Standoff2.jpg" alt="Standoff 2" class="discipline-img">
          <div class="discipline-name">Standoff 2</div>
        </div>
      </div>
    </div>

    <div class="tournaments-section">
      <div class="tournaments-title" data-i18n="tournaments">–¢—É—Ä–Ω—ñ—Ä–∏</div>
      <div class="tournament-list" id="tournamentList">
        <div class="tournament-card">
          <h4>RFORZ Grad Prix</h4>
          <p data-i18n="tournament1desc">–°—Ç–∞—Ä—Ç: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥</p>
        </div>
        <div class="tournament-card">
          <h4>Quiz Battle</h4>
          <p data-i18n="tournament2desc">–ü–æ—á–∞—Ç–æ–∫: 10 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 2000‚Ç¥</p>
        </div>
      </div>
    </div>
  </div>

  <!-- –ù–ê–í–Ü–ì–ê–¶–Ü–Ø -->
  <div class="bottom-nav">
    <div class="nav-item active" data-target="mainSection"><span>üè†</span><p data-i18n="home">–ì–æ–ª–æ–≤–Ω–∞</p></div>
    <div class="nav-item" data-target="rulesSection"><span>üìÑ</span><p data-i18n="rules">–ü—Ä–∞–≤–∏–ª–∞</p></div>
    <div class="nav-item" data-target="awardsSection"><span>üèÜ</span><p data-i18n="awards">–ù–∞–≥–æ—Ä–æ–¥–∏</p></div>
    <div class="nav-item" data-target="supportSection"><span>ü§ñ</span><p data-i18n="support">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</p></div>
  </div>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

const avatar = document.getElementById('avatar');
const profilePopup = document.getElementById('profilePopup');
const registerBtn = document.getElementById('registerBtn');
const profileForm = document.getElementById('profileForm');
const standoffNickInput = document.getElementById('standoffNick');
const standoffIdInput = document.getElementById('standoffId');
const tgUserInput = document.getElementById('tgUser');
const playerProfile = document.getElementById('playerProfile');
const profileNick = document.getElementById('profileNick');
const profileId = document.getElementById('profileId');
const profileTg = document.getElementById('profileTg');
const successMsg = document.getElementById('successMsg');
const createTeamBtn = document.getElementById('createTeamBtn');
const teamForm = document.getElementById('teamForm');
const teamSuccessMsg = document.getElementById('teamSuccessMsg');
const teamAvatarInput = document.getElementById('teamAvatar');
const teamAvatarPreview = document.getElementById('teamAvatarPreview');
const langBtn = document.getElementById('langBtn');
const langPopup = document.getElementById('langPopup');
const notificationBtn = document.getElementById('notificationBtn');
const notificationPopup = document.getElementById('notificationPopup');
const notificationList = document.getElementById('notificationList');
const notificationBadge = document.getElementById('notificationBadge');
const adminMenuBtn = document.getElementById('adminMenuBtn');
const navItems = document.querySelectorAll('.nav-item');

const translations = {uk: {
    register: "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—å",
    standoff_nick: "–ù—ñ–∫ –≤ Standoff",
    standoff_id: "ID –≤ Standoff",
    tg_user: "Telegram",
    done: "–ì–æ—Ç–æ–≤–æ",
    profile: "–ü—Ä–æ—Ñ—ñ–ª—å –≥—Ä–∞–≤—Ü—è",
    profile_saved: "–ü—Ä–æ—Ñ—ñ–ª—å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!",
    create_team: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É",
    team_avatar: "–ê–≤–∞—Ç–∞—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏",
    team_tag: "–¢–µ–≥ –∫–æ–º–∞–Ω–¥–∏",
    team_tag_ph: "–ù–∞–ø—Ä. TEAM",
    team_name: "–ù–∞–∑–≤–∞ –∫–æ–º–∞–Ω–¥–∏",
    team_name_ph: "–ù–∞–ø—Ä. Ukrainian Lions",
    player_id_ph: "ID",
    player_nick_ph: "–ù—ñ–∫–Ω–µ–π–º",
    player_tg_ph: "Telegram",
    team_done: "–ì–æ—Ç–æ–≤–æ",
    team_created: "–ö–æ–º–∞–Ω–¥—É —Å—Ç–≤–æ—Ä–µ–Ω–æ!",
    home: "–ì–æ–ª–æ–≤–Ω–∞",
    rules: "–ü—Ä–∞–≤–∏–ª–∞",
    awards: "–ù–∞–≥–æ—Ä–æ–¥–∏",
    support: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞",
    news: "–ù–æ–≤–∏–Ω–∏",
    disciplines: "–î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏",
    tournaments: "–¢—É—Ä–Ω—ñ—Ä–∏",
    news1title: "üîî –û–Ω–æ–≤–ª–µ–Ω–Ω—è",
    news1desc: "–ú–∏ –¥–æ–¥–∞–ª–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ —Ç–∞ –æ–Ω–æ–≤–∏–ª–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
    news2title: "üèÜ –¢—É—Ä–Ω—ñ—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ",
    news2desc: "–¢–µ–ø–µ—Ä —É—Å—ñ —Ç—É—Ä–Ω—ñ—Ä–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.",
    tournament1desc: "–°—Ç–∞—Ä—Ç: 1 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
    tournament2desc: "–ü–æ—á–∞—Ç–æ–∫: 10 –ª–∏–ø–Ω—è. –ü—Ä–∏–∑–æ–≤–∏–π —Ñ–æ–Ω–¥: 2000‚Ç¥",
    awards_title: "–ù–∞–≥–æ—Ä–æ–¥–∏",
    awards_text: "–£—Å—ñ —É—á–∞—Å–Ω–∏–∫–∏ —Ñ—ñ–Ω–∞–ª—É –æ—Ç—Ä–∏–º—É—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –±–æ–Ω—É—Å–∏. –ü–µ—Ä–µ–º–æ–∂—Ü—ñ ‚Äî –ø—Ä–∏–∑–∏ —Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏."
  },
  en: {
    register: "Register",
    standoff_nick: "Standoff Nick",
    standoff_id: "Standoff ID",
    tg_user: "Telegram",
    done: "Done",
    profile: "Player Profile",
    profile_saved: "Profile saved!",
    create_team: "Create Team",
    team_avatar: "Team Avatar",
    team_tag: "Team Tag",
    team_tag_ph: "e.g. TEAM",
    team_name: "Team Name",
    team_name_ph: "e.g. Ukrainian Lions",
    player_id_ph: "ID",
    player_nick_ph: "Nickname",
    player_tg_ph: "Telegram",
    team_done: "Done",
    team_created: "Team created!",
    home: "Home",
    rules: "Rules",
    awards: "Awards",
    support: "Support",
    news: "News",
    disciplines: "Disciplines",
    tournaments: "Tournaments",
    news1title: "üîî Update",
    news1desc: "We've added English support and refreshed the interface.",
    news2title: "üèÜ Tournaments Updated",
    news2desc: "All tournaments are now on a dedicated page.",
    tournament1desc: "Starts July 1. Prize pool: 5000‚Ç¥",
    tournament2desc: "Starts July 10. Prize pool: 2000‚Ç¥",
    awards_title: "Awards",
    awards_text: "All finalists receive bonus perks. Winners get prizes and certificates."
  },
  ru: {
    register: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è",
    standoff_nick: "–ù–∏–∫ –≤ Standoff",
    standoff_id: "ID –≤ Standoff",
    tg_user: "Telegram",
    done: "–ì–æ—Ç–æ–≤–æ",
    profile: "–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞",
    profile_saved: "–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!",
    create_team: "–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É",
    team_avatar: "–ê–≤–∞—Ç–∞—Ä –∫–æ–º–∞–Ω–¥—ã",
    team_tag: "–¢–µ–≥ –∫–æ–º–∞–Ω–¥—ã",
    team_tag_ph: "–ù–∞–ø—Ä. TEAM",
    team_name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã",
    team_name_ph: "–ù–∞–ø—Ä. Ukrainian Lions",
    player_id_ph: "ID",
    player_nick_ph: "–ù–∏–∫–Ω–µ–π–º",
    player_tg_ph: "Telegram",
    team_done: "–ì–æ—Ç–æ–≤–æ",
    team_created: "–ö–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–Ω–∞!",
    home: "–ì–ª–∞–≤–Ω–∞—è",
    rules: "–ü—Ä–∞–≤–∏–ª–∞",
    awards: "–ù–∞–≥—Ä–∞–¥—ã",
    support: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞",
    news: "–ù–æ–≤–æ—Å—Ç–∏",
    disciplines: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω—ã",
    tournaments: "–¢—É—Ä–Ω–∏—Ä—ã",
    news1title: "üîî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ",
    news1desc: "–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –∏ –æ–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.",
    news2title: "üèÜ –¢—É—Ä–Ω–∏—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã",
    news2desc: "–í—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã —Ç–µ–ø–µ—Ä—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.",
    tournament1desc: "–°—Ç–∞—Ä—Ç: 1 –∏—é–ª—è. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 5000‚Ç¥",
    tournament2desc: "–°—Ç–∞—Ä—Ç: 10 –∏—é–ª—è. –ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: 2000‚Ç¥",
    awards_title: "–ù–∞–≥—Ä–∞–¥—ã",
    awards_text: "–§–∏–Ω–∞–ª–∏—Å—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –±–æ–Ω—É—Å—ã, –ø–æ–±–µ–¥–∏—Ç–µ–ª–∏ ‚Äî –ø—Ä–∏–∑—ã –∏ –¥–∏–ø–ª–æ–º—ã."
  },
  pl: {
    register: "Zarejestruj siƒô",
    standoff_nick: "Nick w Standoff",
    standoff_id: "ID w Standoff",
    tg_user: "Telegram",
    done: "Gotowe",
    profile: "Profil gracza",
    profile_saved: "Profil zapisany!",
    create_team: "Stw√≥rz dru≈ºynƒô",
    team_avatar: "Awatar dru≈ºyny",
    team_tag: "Tag dru≈ºyny",
    team_tag_ph: "Np. TEAM",
    team_name: "Nazwa dru≈ºyny",
    team_name_ph: "Np. Polish Eagles",
    player_id_ph: "ID",
    player_nick_ph: "Nick",
    player_tg_ph: "Telegram",
    team_done: "Gotowe",
    team_created: "Dru≈ºyna utworzona!",
    home: "G≈Ç√≥wna",
    rules: "Zasady",
    awards: "Nagrody",
    support: "Wsparcie",
    news: "Aktualno≈õci",
    disciplines: "Dyscypliny",
    tournaments: "Turnieje",
    news1title: "üîî Aktualizacja",
    news1desc: "Dodano wsparcie jƒôzyka angielskiego i ulepszono interfejs.",
    news2title: "üèÜ Zaktualizowane turnieje",
    news2desc: "Wszystkie turnieje sƒÖ teraz dostƒôpne na osobnej stronie.",
    tournament1desc: "Start: 1 lipca. Pula nagr√≥d: 5000‚Ç¥",
    tournament2desc: "Start: 10 lipca. Pula nagr√≥d: 2000‚Ç¥",
    awards_title: "Nagrody",
    awards_text: "Wszyscy finali≈õci otrzymajƒÖ bonusy. Zwyciƒôzcy otrzymajƒÖ nagrody i certyfikaty."
  }
};
let currentLanguage = localStorage.getItem('language') || 'uk';

function translatePage() {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    if (translations[currentLanguage]?.[key]) {
      el.textContent = translations[currentLanguage][key];
    }
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.dataset.i18nPlaceholder;
    if (translations[currentLanguage]?.[key]) {
      el.placeholder = translations[currentLanguage][key];
    }
  });
}
function setLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('language', lang);
  translatePage();
}
document.querySelectorAll('.lang-option').forEach(btn => {
  btn.addEventListener('click', () => {
    setLanguage(btn.dataset.lang);
    langPopup.classList.remove('active');
  });
});

avatar.addEventListener('click', () => {
  profilePopup.classList.toggle('active');
  langPopup.classList.remove('active');
  notificationPopup.classList.remove('active');
});
langBtn.addEventListener('click', () => {
  langPopup.classList.toggle('active');
  profilePopup.classList.remove('active');
  notificationPopup.classList.remove('active');
});
notificationBtn.addEventListener('click', () => {
  notificationPopup.classList.toggle('active');
  profilePopup.classList.remove('active');
  langPopup.classList.remove('active');
});
document.addEventListener('click', e => {
  if (!profilePopup.contains(e.target) && e.target !== avatar) profilePopup.classList.remove('active');
  if (!langPopup.contains(e.target) && e.target !== langBtn) langPopup.classList.remove('active');
  if (!notificationPopup.contains(e.target) && e.target !== notificationBtn && !notificationBadge.contains(e.target)) {
    notificationPopup.classList.remove('active');
  }
});

if (tg.initDataUnsafe?.user) {
  tgUserInput.value = tg.initDataUnsafe.user.username || tg.initDataUnsafe.user.first_name || 'N/A';
}
const savedProfile = localStorage.getItem('userProfile');
if (savedProfile) {
  const profile = JSON.parse(savedProfile);
  displayProfile(profile);
  registerBtn.style.display = 'none';
  createTeamBtn.style.display = 'block';
}
registerBtn.addEventListener('click', () => {
  registerBtn.style.display = 'none';
  profileForm.style.display = 'flex';
  playerProfile.style.display = 'none';
  successMsg.style.display = 'none';
  createTeamBtn.style.display = 'none';
});
profileForm.addEventListener('submit', e => {
  e.preventDefault();
  const profile = {
    standoffNick: standoffNickInput.value,
    standoffId: standoffIdInput.value,
    tgUser: tgUserInput.value
  };
  localStorage.setItem('userProfile', JSON.stringify(profile));
  displayProfile(profile);
  profileForm.style.display = 'none';
  successMsg.style.display = 'block';
  createTeamBtn.style.display = 'block';
});
function displayProfile(profile) {
  profileNick.textContent = profile.standoffNick;
  profileId.textContent = profile.standoffId;
  profileTg.textContent = profile.tgUser;
  playerProfile.style.display = 'block';
}
createTeamBtn.addEventListener('click', () => {
  teamForm.style.display = 'flex';
  createTeamBtn.style.display = 'none';
  teamSuccessMsg.style.display = 'none';
  profilePopup.classList.remove('active');
});
teamAvatarInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      teamAvatarPreview.src = e.target.result;
      teamAvatarPreview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    teamAvatarPreview.src = '#';
    teamAvatarPreview.style.display = 'none';
  }
});
teamForm.addEventListener('submit', async e => {
  e.preventDefault();
  const teamName = document.getElementById('teamName').value;
  const teamTag = document.getElementById('teamTag').value;
  const captainUsername = tg.initDataUnsafe?.user?.username || 'unknown';
  const players = []; // —Ä–µ–∞–ª—ñ–∑—É–π —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—ñ–≤ –≤—Ä—É—á–Ω—É –∞–±–æ —Ü–∏–∫–ª–æ–º

  const teamData = {
    team_name: teamName,
    team_tag: teamTag,
    captain_username: captainUsername,
    players
  };

  try {
    const res = await fetch('/api/create_team', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(teamData),
    });
    const result = await res.json();
    if (result.success) {
      const invited = players.length ? players.map(u => `@${u}`).join(', ') : '–Ω–µ–º–∞—î';
      addNotification('team_created_captain', { teamName, invitedUsers: invited });
      teamForm.style.display = 'none';
      teamSuccessMsg.style.display = 'block';
      createTeamBtn.style.display = 'block';
    } else {
      alert(`–ü–æ–º–∏–ª–∫–∞: ${result.message}`);
    }
  } catch (err) {
    console.error(err);
    alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ–º–∞–Ω–¥–∏.');
  }
});

// –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è
const notifications = [
  { type: 'team_created_captain', text: '–ö–æ–º–∞–Ω–¥—É {{teamName}} —Å—Ç–≤–æ—Ä–µ–Ω–æ. –ó–∞–ø—Ä–æ—à–µ–Ω—ñ: {{invitedUsers}}' },
];
function addNotification(type, data = {}) {
  const template = notifications.find(n => n.type === type)?.text;
  if (!template) return;
  const msg = template.replace(/\{\{(\w+)\}\}/g, (_, key) => data[key] || '');
  const item = document.createElement('div');
  item.classList.add('notification-item');
  item.textContent = msg;
  notificationList.prepend(item);
  notificationBadge.textContent = notificationList.children.length;
  notificationBadge.style.display = 'flex';
}
document.getElementById('clearNotificationsBtn').addEventListener('click', () => {
  notificationList.innerHTML = '';
  notificationBadge.textContent = '0';
  notificationBadge.style.display = 'none';
});

// –ê–¥–º—ñ–Ω–∫–∞
const ADMIN_IDS = new Set([5806282517]);
if (tg.initDataUnsafe?.user?.id && ADMIN_IDS.has(tg.initDataUnsafe.user.id)) {
  adminMenuBtn.style.display = 'block';
  adminMenuBtn.addEventListener('click', () => {
    alert('–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ üëë');
  });
}

// –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
    item.classList.add('active');
    ['mainSection','rulesSection','awardsSection','supportSection'].forEach(id => {
      document.getElementById(id)?.classList.remove('active');
    });
    document.getElementById(item.dataset.target)?.classList.add('active');
  });
});

setLanguage(currentLanguage); // –ø–µ—Ä–µ–∫–ª–∞–¥ –æ–¥—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É

</script>
</body>
</html>
