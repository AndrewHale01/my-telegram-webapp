<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Telegram WebApp</title>
<!-- Google Analytics (можна видалити якщо не потрібно) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TZN665FNYF"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TZN665FNYF');
</script>
<style>
/* ...весь твій CSS без змін... */
body { margin: 0; background: #222; color: #fff; font-family: 'Segoe UI', Arial, sans-serif; padding-bottom: 60px; }
    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      position: relative;
    }
    .lang-btn {
      font-size: 1.5rem;
      cursor: pointer;
    }
    .lang-popup {
      display: none;
      position: absolute;
      top: 60px;
      left: 16px;
      background: #333;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      flex-direction: column;
      z-index: 10;
      width: 200px;
    }
    .lang-popup.active {
      display: flex;
    }
    /* Updated style for language options: removed white background */
    .lang-option {
      background: none; /* Ensure no white background */
      border: none;
      color: #fff;
      padding: 8px 12px;
      margin: 4px 0;
      text-align: left;
      cursor: pointer;
      font-size: 1rem;
      border-radius: 6px;
      transition: background 0.2s;
    }
    .lang-option:hover {
      background: #444;
    }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid #00bfae;
      cursor: pointer;
      object-fit: cover;
      background: #111;
      transition: box-shadow 0.2s;
    }
    .avatar-small:hover {
      box-shadow: 0 0 0 4px #00bfae55;
    }
    /* Updated Profile Popup positioning */
    #profilePopup {
      top: 60px;
      right: 16px; /* Moved to right */
      left: auto; /* Reset left */
      max-width: 360px;
    }
    .popup {
      display: none;
      position: absolute; /* Kept for langPopup and notificationPopup */
      background: #333;
      padding: 24px 20px 20px 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      z-index: 10;
      flex-direction: column;
      min-width: 0px;
      align-items: center;
      animation: fadeIn 0.2s;
    }
    .popup.active {
      display: flex;
    }

    .register-btn, .done-btn, .create-team-btn, .submit-btn {
      background: #2196f3;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      margin: 8px auto; /* Centered */
      transition: background 0.2s;
      width: 100%;
      max-width: 220px;
      display: block; /* Ensures margin: auto works */
    }
    .register-btn:hover, .done-btn:hover, .create-team-btn:hover, .submit-btn:hover {
      background: #1976d2;
    }

    .profile-form,
    .team-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 340px;
      margin-top: 8px;
      align-items: center;
      margin: 8px auto; /* Centered */
    }
    .profile-form label,
    .team-form label {
      font-size: 0.95rem;
      color: #bbb;
      margin-bottom: 2px;
      align-self: flex-start;
    }
    .profile-form input,
    .team-form input[type="text"],
    .team-form input[type="file"] {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
      width: 100%;
    }
    .profile-form input[readonly] {
      background: #222;
      color: #aaa;
      border: 1px solid #444;
    }

    .player-profile {
      width: 100%;
      max-width: 220px;
      background: #222;
      border-radius: 10px;
      padding: 12px 14px;
      font-size: 1rem;
      display: none;
      color: #fff;
    }
    .player-profile-title {
      margin-bottom: 8px;
      color: #00bfae;
      font-weight: bold;
      font-size: 1.05rem;
    }
    .player-profile-row {
      margin-bottom: 4px;
      word-break: break-word;
    }

    .success-message, .team-success-message {
      color: #00bfae;
      font-size: 1rem;
      margin: 10px 0 0 0;
      text-align: center;
    }

    .team-avatar-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #00bfae;
      margin-bottom: 8px;
      background: #111;
      display: none;
    }

    .team-player-block {
      background: #292929;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 8px;
      width: 100%;
      box-sizing: border-box;
    }
    .team-player-title {
      color: #00bfae;
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 1rem;
    }

    .notification-btn {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      position: relative;
      margin-left: 8px;
      color: #fff;
    }
    .notification-badge {
      position: absolute;
      top: 2px;
      right: 10px;
      background: #e53935;
      color: #fff;
      border-radius: 50%;
      font-size: 0.85rem;
      min-width: 20px;
      min-height: 20px;
      padding: 0 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border: 2px solid #222;
      box-sizing: border-box;
      z-index: 2;
    }

    #adminPopup {
      display: none; /* Hidden by default, shown by JS */
      position: fixed;
      top: 90px;
      right: 20px;
      background: #1e1e1e;
      border: 2px solid #00bfae;
      border-radius: 16px;
      padding: 20px 24px;
      z-index: 999;
      width: 320px;
      box-shadow: 0 0 20px rgba(0, 191, 174, 0.3);
      font-family: 'Segoe UI', sans-serif;
      animation: fadeIn 0.2s ease-in-out;
    }

    #adminPopup.active {
      display: block;
    }

    #adminPopup h2 {
      color: #00bfae;
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 20px;
      text-align: center;
    }

    #adminPopup button {
      padding: 10px 16px;
      font-size: 15px;
      background-color: #2b2b2b;
      color: #eee;
      border: 1px solid #00bfae;
      border-radius: 10px;
      margin-bottom: 10px;
      width: 100%;
      transition: background 0.2s;
    }

    #adminPopup button:hover {
      background-color: #00bfae;
      color: #111;
    }

    #closeAdminModal {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #aaa;
      border: none;
      font-size: 18px;
      cursor: pointer;
    }

    #adminMenuBtn {
      font-size: 28px;
      padding: 12px 16px;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      display: none; /* Hidden by default, shown by JS if isAdmin */
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95);}
      to { opacity: 1; transform: scale(1);}
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.75rem; /* Decreased font size for text */
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1rem; /* Decreased font size for icons */
      margin-bottom: 2px;
    }
    .nav-item.active, .nav-item:hover {
      color: #00bfae;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .news-section,
    .disciplines-section,
    .tournaments-section {
      margin-top: 24px;
      padding: 0 16px;
    }

    .news-title,
    .disciplines-title,
    .tournaments-title {
      margin-left: 4px;
      margin-bottom: 8px;
      font-size: 1.2rem;
      font-weight: bold;
      color: #00bfae;
    }
    .news-list,
    .disciplines-list,
    .tournament-list {
      display: flex;
      overflow-x: auto;
      gap: 16px;
      padding: 12px 4px;
      scroll-snap-type: x mandatory;
    }

    .news-card,
    .tournament-card,
    .discipline-card {
      flex: 0 0 auto;
      width: 280px;
      background: #292929;
      border: 2px solid #00bfae88;
      border-radius: 12px;
      padding: 16px;
      scroll-snap-align: start;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .news-card:hover,
    .tournament-card:hover,
    .discipline-card:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 10px rgba(0, 191, 174, 0.25);
    }

    .news-card h4,
    .tournament-card h4 {
      margin-top: 0;
      color: #00bfae;
      font-size: 1.1rem;
    }
    #adminMenuBtn { display: none; } /* приховано за замовчуванням */
    #editTournamentBtn { display: none; } /* приховано за замовчуванням */
    .news-card p,
    .tournament-card p {
      font-size: 0.95rem;
      color: #ddd;
    }

    .discipline-img {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .discipline-name {
      font-weight: bold;
      text-align: center;
      font-size: 1rem;
      color: #fff;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #111;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 8px 0;
      z-index: 100;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #ccc;
      font-size: 0.75rem; /* Modified font size */
      cursor: pointer;
    }
    .nav-item span {
      font-size: 1rem; /* Modified font size for icon */
      margin-bottom: 2px;
    }
    .nav-item:hover {
      color: #00bfae;
    }
    .section {
      padding: 24px 16px;
      display: none;
    }
    .section.active {
      display: block;
    }
    /* Updated Notification Popup positioning */
    #notificationPopup {
      right: 16px; /* Adjusted to align with other right-aligned elements */
      min-width: 280px;
    }

    /* New styles for consistent pages */
    .section h2 {
      margin-top: 0;
      margin-bottom: 16px;
      font-size: 1.5rem; /* Larger heading */
      font-weight: bold;
      color: #00bfae; /* Consistent highlight color */
      text-align: center;
    }
    .section p {
      font-size: 1rem;
      color: #ddd;
      line-height: 1.5;
      margin-bottom: 16px;
    }
    .section details {
      background: #292929;
      border: 2px solid #00bfae88;
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 12px;
      color: #fff;
      font-size: 1rem;
    }
    .section summary {
      font-weight: bold;
      color: #00bfae;
      cursor: pointer;
      padding: 4px 0;
    }
    .section details p {
      padding-top: 10px;
      margin-bottom: 0;
      color: #ccc;
      font-size: 1rem; /* Bigger font for rules */
      font-family: 'Segoe UI', Arial, sans-serif; /* Nicer font for rules */
    }

    /* Styles for Awards and Tournament Details */
    .award-card {
        background: #292929;
        border: 2px solid #00bfae88;
        border-radius: 12px;
        padding: 12px; /* Smaller padding for a more compact card */
        margin-bottom: 12px;
        display: flex; /* Make it horizontal */
        align-items: center; /* Vertically align items */
        gap: 12px; /* Space between icon and text */
        cursor: pointer; /* Indicate it's clickable */
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .award-card:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 10px rgba(0, 191, 174, 0.25);
    }

    .award-content-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%; /* Take full width of card */
    }

    .award-card-icon {
        font-size: 2.2rem; /* Size for emoji icon */
        line-height: 1;
        flex-shrink: 0; /* Prevent icon from shrinking */
    }

    .award-card-img {
        width: 48px; /* Size for image icon */
        height: 48px;
        object-fit: cover;
        border-radius: 8px; /* Slightly rounded corners for images */
        flex-shrink: 0;
    }

    .award-text-content {
        flex-grow: 1; /* Allow text content to take available space */
    }

    .award-text-content h4 {
        margin: 0;
        color: #00bfae;
        font-size: 1.1rem;
        white-space: nowrap; /* Prevent title from wrapping */
        overflow: hidden; /* Hide overflow */
        text-overflow: ellipsis; /* Add ellipsis if too long */
    }

    .tournament-name-on-card {
        margin: 4px 0 0;
        font-size: 0.9rem;
        color: #ddd;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .btn-primary {
        background: #00bfae;
        color: #fff;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        transition: background 0.2s ease-in-out;
        width: 100%;
        max-width: 300px;
        display: block; /* Make it a block element to center with margin auto */
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }

    .btn-primary:hover {
        background: #008f82;
    }

    .back-btn {
        background: #333;
        color: #eee;
        border: 1px solid #555;
        padding: 10px 20px;
        border-radius: 8px;
        font-size: 0.9rem;
        cursor: pointer;
        margin-top: 20px;
        margin-bottom: 10px;
        transition: background 0.2s ease-in-out;
    }

    .back-btn:hover {
        background: #444;
    }

    .ranking-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        color: #fff;
    }

    .ranking-table th,
    .ranking-table td {
        padding: 10px;
        border: 1px solid #333;
        text-align: left;
    }

    .ranking-table th {
        background-color: #00bfae;
        color: #111;
        font-weight: bold;
    }

    .ranking-table tbody tr:nth-child(even) {
        background-color: #292929;
    }

    .ranking-table tbody tr:nth-child(odd) {
        background-color: #222;
    }

    /* Styles for the new Tournament section */
    .tournament-section-content {
        background: #292929;
        border: 2px solid #00bfae88;
        border-radius: 12px;
        padding: 16px;
        margin-top: 20px;
    }

    .tournament-section-content h3 {
        color: #00bfae;
        margin-top: 0;
        margin-bottom: 10px;
    }

    /* New Tab/Header styles */
    .tournament-tabs {
        display: flex;
        justify-content: space-around;
        margin-bottom: 20px;
        border-bottom: 1px solid #555; /* A subtle separator for the tabs area */
    }

    .tournament-tab {
        padding: 12px 20px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: bold;
        color: #ccc;
        transition: color 0.2s, border-bottom 0.2s;
        flex-grow: 1; /* Make tabs take equal width */
        text-align: center;
        border-bottom: 2px solid transparent; /* Default state */
    }

    .tournament-tab:hover {
        color: #fff;
    }

    .tournament-tab.active {
        color: #00bfae;
        border-bottom: 2px solid #00bfae; /* Active tab indicator */
    }

    .tournament-tab-content {
        display: none;
        width: 100%;
    }

    .tournament-tab-content.active {
        display: block;
    }

    .group-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

    .group-table th,
    .group-table td {
        border: 1px solid #333;
        padding: 8px;
        text-align: left;
    }

    .group-table th {
        background-color: #00bfae;
        color: #111;
    }

    .group-table tbody tr:nth-child(even) {
        background-color: #292929;
    }

    .group-table tbody tr:nth-child(odd) {
        background-color: #222;
    }

    .playoff-bracket {
        margin-top: 20px;
        text-align: center; /* Center the bracket content */
        color: #ddd;
    }

    .playoff-bracket img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
        border-radius: 8px;
        border: 1px solid #00bfae;
    }

    /* Styles for Modals (Tournament Creation and now Profile) */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1001; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0,0,0,0.6); /* Black w/ opacity */
      padding-top: 60px;
    }
    /* Added .active class for modals */
    .modal.active {
      display: block;
    }

    .modal-content {
      background-color: #333;
      margin: 5% auto; /* 5% from the top and centered */
      padding: 20px;
      border: 1px solid #00bfae;
      border-radius: 12px;
      width: 90%; /* Could be more responsive */
      max-width: 500px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
      animation: fadeIn 0.3s ease-out;
      position: relative;
    }

    .close-button {
      color: #aaa;
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close-button:hover,
    .close-button:focus {
      color: #fff;
      text-decoration: none;
      cursor: pointer;
    }

    .modal h2 {
      color: #00bfae;
      text-align: center;
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #eee;
      font-size: 0.95rem;
    }

    .form-group input[type="text"],
    .form-group input[type="date"],
    .form-group input[type="number"],
    .form-group textarea,
    .form-group select {
      width: calc(100% - 20px);
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      font-size: 1rem;
      outline: none;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .submit-btn {
      background: #00bfae;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      display: block;
      width: 100%;
      max-width: 250px;
      margin: 20px auto 0;
      transition: background 0.2s ease-in-out;
    }

    .submit-btn:hover {
      background: #008f82;
    }
  </style>
</head>
<body>
<div class="topbar">
<div class="lang-btn" id="langBtn">🌐</div>
<div class="lang-popup popup" id="langPopup">
<button class="lang-option" data-lang="uk">🇺🇦 Українська</button>
<button class="lang-option" data-lang="en">🇬🇧 English</button>
<button class="lang-option" data-lang="ru">🇷🇺 Русский</button>
<button class="lang-option" data-lang="pl">🇵🇱 Polski</button>
</div>
<img alt="Avatar" class="avatar-small" id="avatar" src="avatar.jpg"/>
<button class="notification-btn" id="notificationBtn" title="Сповіщення">
      🔔
      <span class="notification-badge" id="notificationBadge" style="display:none;">0</span>
</button>
<div class="admin-menu" id="adminMenuBtn" title="Адмін-меню">🛡️</div>
<div class="adminPopup popup" id="adminPopup">
<h2 data-i18n="admin_menu_title" id="adminMenuTitle">Адмін-меню</h2>
<div style="display:flex; flex-direction:column; gap:12px;">
<button data-i18n="create_tournament_btn" id="createTournamentAdminBtn">➕ Створити турнір</button>
<button data-i18n="ban_user" id="banUserBtn">🚫 Заблокувати користувача</button>
<button data-i18n="unban_user" id="unbanUserBtn">✅ Розблокувати користувача</button>
<button data-i18n="give_prize" id="givePrizeBtn">🏆 Видати приз</button>
<button data-i18n="disqualify_team" id="disqualifyTeamBtn">❌ Дискваліфікувати команду</button>
</div>
</div>
</div>
<div class="modal" id="profileModal">
<div class="modal-content">
<span class="close-button" id="closeProfileModalBtn">×</span>
<h2 data-i18n="profile" id="profileModalTitle">Профіль гравця</h2>
<button class="register-btn" data-i18n="register" id="registerBtn">Зареєструватись</button>
<form class="profile-form" id="profileForm" style="display:none;">
<label data-i18n="standoff_nick" for="standoffNick">Нік в Standoff</label>
<input autocomplete="off" id="standoffNick" maxlength="32" name="standoffNick" required="" type="text"/>
<label data-i18n="standoff_id" for="standoffId">ID в Standoff</label>
<input autocomplete="off" id="standoffId" maxlength="32" name="standoffId" required="" type="text"/>
<label data-i18n="tg_user" for="tgUser">Telegram</label>
<input id="tgUser" name="tgUser" readonly="" type="text"/>
<button class="done-btn" data-i18n="done" id="doneBtn" type="submit">Готово</button>
</form>
<div class="player-profile" id="playerProfile">
<div class="player-profile-title" data-i18n="profile">Профіль гравця</div>
<div class="player-profile-row">
<span data-i18n="standoff_nick">Нік в Standoff</span>: <span id="profileNick"></span>
</div>
<div class="player-profile-row">
<span data-i18n="standoff_id">ID в Standoff</span>: <span id="profileId"></span>
</div>
<div class="player-profile-row">
<span data-i18n="tg_user">Telegram</span>: <span id="profileTg"></span>
</div>
</div>
<button class="create-team-btn" data-i18n="create_team" id="createTeamBtn" style="display:none;">Створити команду</button>
<div class="success-message" data-i18n="profile_saved" id="successMsg" style="display:none;">Профіль збережено!</div>
<form class="team-form" id="teamForm" style="display:none;">
<label data-i18n="team_avatar" for="teamAvatar">Аватарка команди</label>
<input accept="image/*" id="teamAvatar" type="file"/>
<img alt="Team Avatar" class="team-avatar-preview" id="teamAvatarPreview" src="#"/>
<label data-i18n="team_tag" for="teamTag">Тег команди</label>
<input data-i18n-placeholder="team_tag_ph" id="teamTag" maxlength="12" required="" type="text"/>
<label data-i18n="team_name" for="teamName">Назва команди</label>
<input data-i18n-placeholder="team_name_ph" id="teamName" maxlength="32" required="" type="text"/>
<div class="team-player-block">
<div class="team-player-title" data-i18n="main_player1">Гравець 1 (капітан)</div>
<input data-i18n-placeholder="player_id_ph" id="main1Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="main1Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="main1Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="main_player2">Гравець 2 (основний)</div>
<input data-i18n-placeholder="player_id_ph" id="main2Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="main2Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="main2Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="main_player3">Гравець 3 (основний)</div>
<input data-i18n-placeholder="player_id_ph" id="main3Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="main3Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="main3Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="main_player4">Гравець 4 (основний)</div>
<input data-i18n-placeholder="player_id_ph" id="main4Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="main4Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="main4Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="main_player5">Гравець 5 (основний)</div>
<input data-i18n-placeholder="player_id_ph" id="main5Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="main5Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="main5Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="spare_player1">Гравець 6 (запасний)</div>
<input data-i18n-placeholder="player_id_ph" id="spare1Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="spare1Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="spare1Tg" placeholder="Telegram" required="" type="text"/>
</div>
<div class="team-player-block">
<div class="team-player-title" data-i18n="spare_player2">Гравець 7 (запасний)</div>
<input data-i18n-placeholder="player_id_ph" id="spare2Id" placeholder="ID в Standoff 2" required="" type="text"/>
<input data-i18n-placeholder="player_nick_ph" id="spare2Nick" placeholder="Нікнейм" required="" type="text"/>
<input data-i18n-placeholder="player_tg_ph" id="spare2Tg" placeholder="Telegram" required="" type="text"/>
</div>
<button class="done-btn" data-i18n="team_done" id="teamDoneBtn" type="submit">Готово</button>
</form>
<div class="team-success-message" data-i18n="team_created" id="teamSuccessMsg" style="display:none;">Команду створено!</div>
</div>
</div>
<div class="popup" id="notificationPopup">
<div data-i18n="notification_title" id="notificationTitle" style="font-weight:bold; color:#00bfae; margin-bottom:8px;">Сповіщення</div>
<div id="notificationList" style="width:100%;"></div>
<button class="done-btn" data-i18n="clear_notifications_btn" id="clearNotificationsBtn" style="margin-top:10px;">Очистити</button>
</div>
<div class="section" id="homeSection">
<div class="main-section" id="mainSection">
<div class="news-section">
<div class="news-title" data-i18n="news">Новини</div>
<div class="news-list" id="newsList">
<div class="news-card">
<h4 data-i18n="news1title">🔔 Оновлення</h4>
<p data-i18n="news1desc">Ми додали підтримку англійської мови та оновили інтерфейс.</p>
</div>
<div class="news-card">
<h4 data-i18n="news2title">🏆 Турніри оновлено</h4>
<p data-i18n="news2desc">Тепер усі турніри доступні на окремій сторінці.</p>
</div>
</div>
</div>
<div class="disciplines-section">
<div class="disciplines-title" data-i18n="disciplines">Дисципліни</div>
<div class="disciplines-list">
<div class="discipline-card">
<img alt="Standoff 2" class="discipline-img" src="Standoff2.jpg"/>
<div data-i18n="discipline_standoff2" class="discipline-name">Standoff 2</div>
</div>
</div>
</div>
<div class="tournaments-section">
<div class="tournaments-title" data-i18n="tournaments">Турніри</div>
<div class="tournament-list" id="tournamentList">
<div class="tournament-card" onclick="showSection('tournamentViewSection'); loadTournamentDetails('RFORZ Grand Prix');">
<h4 data-i18n="tournament_name_grand_prix">RFORZ Grand Prix</h4>
<p data-i18n="tournament1desc">Старт: 1 липня. Призовий фонд: 5000₴</p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="rulesSection">
<h2 data-i18n="rules_main_title">Правила турніру</h2>
<details>
<summary data-i18n="rules_1v1_summary">Турніри 1х1</summary>
<p data-i18n="rules_1v1_text">• Гравці грають один проти одного.<br/> • Раунди проходять до 3 перемог.<br/> • Перемагає той, хто перший виграє 3 раунди. </p>
</details>
<details>
<summary data-i18n="rules_2v2_summary">Турніри 2х2</summary>
<p data-i18n="rules_2v2_text">• Команди по 2 гравці.<br/> • Успіх залежить від координації та злагодженої гри.<br/> • Перші до 5 перемог — проходять далі.<br/> • Якщо рахунок 5-5, грається додатковий раунд. </p>
</details>
<details>
<summary data-i18n="rules_5v5_standoff_summary">Турніри 5х5</summary>
<p data-i18n="rules_5v5_standoff_text">• Команди по 5 гравців.<br/> • Грають 10 раундів.<br/> • Перемагає команда, що набрала більше раундів.<br/> • Якщо рахунок 5-5, грається додатковий раунд. </p>
</details>
</div>
<div class="section" id="awardsSection">
<h2 data-i18n="awards_title">Нагороди</h2>
<div id="awardsList"> </div>
</div>
<div class="modal" id="createTournamentModal">
<div class="modal-content">
<span class="close-button" id="closeTournamentModalBtn">×</span>
<h2 data-i18n="create_tournament_modal_title">Створити Турнір</h2>
<form id="tournamentForm">
<div class="form-group">
<label data-i18n="tournament_name_label" for="tournamentName">Назва Турніру</label>
<input id="tournamentName" required="" type="text"/>
</div>
<div class="form-group">
<label data-i18n="tournament_discipline_label" for="tournamentDiscipline">Дисципліна</label>
<select id="tournamentDiscipline" required="">
<option data-i18n="discipline_standoff2" value="standoff2">Standoff 2</option>
</select>
</div>
<div class="form-group">
<label data-i18n="tournament_format_label" for="tournamentFormat">Формат</label>
<select id="tournamentFormat" required="">
<option value="1v1">1v1</option>
<option value="2v2">2v2</option>
<option value="5v5">5v5</option>
</select>
</div>
<div class="form-group">
<label data-i18n="start_date_label" for="startDate">Дата початку</label>
<input id="startDate" required="" type="date"/>
</div>
<div class="form-group">
<label data-i18n="end_date_label" for="endDate">Дата закінчення</label>
<input id="endDate" required="" type="date"/>
</div>
<div class="form-group">
<label data-i18n="prize_pool_label" for="prizePool">Призовий Фонд</label>
<input id="prizePool" min="0" required="" type="number" value="0"/>
</div>
<div class="form-group">
<label data-i18n="description_label" for="description">Опис</label>
<textarea id="description" rows="4"></textarea>
</div>
<button class="submit-btn" data-i18n="create_btn_submit" type="submit">Створити</button>
</form>
</div>
</div>

<div class="section" id="tournamentViewSection">
  <button class="back-btn" data-i18n="back_to_home" id="backToHomeFromTournamentView" onclick="showSection('homeSection')">← Головна</button>
  <button class="back-btn" data-i18n="edit_tournament_btn" id="editTournamentBtn" style="display:none;">✏️ Редагувати турнір</button>
<h2 data-i18n="tournament_view_title">Перегляд Турніру</h2>
<div class="tournament-section-content">
<div id="userTournamentView">
<div class="tournament-tabs" id="tournamentTabs">
<div class="tournament-tab active" data-tab="groupStage" data-i18n="group_stage_tab">Груповий етап</div>
<div class="tournament-tab" data-tab="playoffs" data-i18n="playoffs_tab">Плей-офф</div>
</div>
<div class="tournament-tab-content active" id="groupStageContent">
<h3 data-i18n="group_a_title">Група A</h3>
<table class="group-table">
<thead>
<tr>
<th data-i18n="team_column">Команда</th>
<th data-i18n="wins_column">Перемоги</th>
<th data-i18n="losses_column">Поразки</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<h3 data-i18n="group_b_title" style="margin-top:20px;">Група B</h3>
<table class="group-table">
<thead>
<tr>
<th data-i18n="team_column">Команда</th>
<th data-i18n="wins_column">Перемоги</th>
<th data-i18n="losses_column">Поразки</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
<div class="tournament-tab-content" id="playoffsContent">
<h3 data-i18n="playoffs_title">Плей-офф</h3>
<div class="playoff-bracket">
<p data-i18n="playoff_bracket_text">Тут буде сітка плей-офф.</p>
<img alt="Playoff Bracket" src="playoff_bracket_placeholder.png"/>
</div>
</div>
</div>
<div id="adminTournamentView" style="display:none;">
<h3 data-i18n="edit_tournament_admin_title">Редагування Турніру</h3>
<button data-i18n="add_team_btn" id="addTeamBtn">Додати команду</button>
<button data-i18n="remove_team_btn" id="removeTeamBtn">Видалити команду</button>
<button data-i18n="update_scores_btn" id="updateScoresBtn">Оновити рахунки</button>
<div id="addTeamSection" style="display:none;">
<h4 data-i18n="add_team_to_group_title">Додати команду до групи</h4>
<input data-i18n-placeholder="team_name_ph" id="newTeamName" placeholder="Назва команди" type="text"/>
<select id="teamGroupSelect">
<option data-i18n="group_a_option" value="groupA">Група A</option>
<option data-i18n="group_b_option" value="groupB">Група B</option>
</select>
<button data-i18n="add_btn_submit" id="submitAddTeam">Додати</button>
</div>
<div id="removeTeamSection" style="display:none;">
<h4 data-i18n="remove_team_title">Видалити команду</h4>
<select id="removeTeamSelect"></select>
<button data-i18n="remove_btn_submit" id="submitRemoveTeam">Видалити</button>
</div>
<h4 data-i18n="tournament_groups_admin_title">Групи Турніру (Адмін)</h4>
<table class="group-table" id="adminGroupATable">
<thead>
<tr>
<th data-i18n="team_column">Команда</th>
<th data-i18n="action_column">Дія</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<table class="group-table" id="adminGroupBTable">
<thead>
<tr>
<th data-i18n="team_column">Команда</th>
<th data-i18n="action_column">Дія</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="tournamentDetailsSection">
<button class="back-btn" data-i18n="back_to_awards" id="backToAwardsBtn" style="display:none;">← Нагороди</button>
<button class="back-btn" data-i18n="back_to_tournaments" id="backToTournamentsBtn">← Турніри</button>
<h2 data-i18n="tournament_details_title" id="tournamentDetailsTitle">Деталі Турніру</h2>
<p data-i18n="tournament_details_desc" id="tournamentDetailsDescription"></p>
<div class="ranking-table">
<h3 data-i18n="ranking_title">Рейтинг</h3>
<table>
<thead>
<tr>
<th data-i18n="place_column">Місце</th>
<th data-i18n="team_column">Команда</th>
<th data-i18n="points_column">Очки</th>
</tr>
</thead>
<tbody id="tournamentRankingBody">
</tbody>
</table>
</div>
<button class="btn-primary" data-i18n="participate_btn" id="participateBtn">Взяти участь</button>
</div>
<div class="section" id="supportSection">
<h2 data-i18n="support_title">Підтримка</h2>
<p data-i18n="support_text">Якщо у вас виникли питання або проблеми, будь ласка, зв'яжіться з нашою службою підтримки.</p>
<p data-i18n="support_contact_info">Ви можете зв'язатися з нами через Telegram: <a href="https://t.me/your_support_username" target="_blank">@your_support_username</a></p>
</div>
<div class="bottom-nav">
<div class="nav-item active" id="homeNav">
<span>🏠</span>
<span data-i18n="home">Головна</span>
</div>
<div class="nav-item" id="rulesNav">
<span>📜</span>
<span data-i18n="rules">Правила</span>
</div>
<div class="nav-item" id="awardsNav">
<span>🏆</span>
<span data-i18n="awards">Нагороди</span>
</div>
<div class="nav-item" id="supportNav">
<span>🤖</span>
<span data-i18n="support">Підтримка</span>
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const tg = window.Telegram?.WebApp;
  if (tg) tg.expand();

  const sections = document.querySelectorAll(".section");
  const navItems = document.querySelectorAll(".nav-item");

  // Define the admin user ID
  const ADMIN_USER_ID = "5806282517";
  let currentUserId = ""; // Initialize as empty string, not admin by default

  if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
    currentUserId = tg.initDataUnsafe.user.id.toString();
  }

  // Елементи адмін-меню та кнопки редагування
  const adminMenuBtn = document.getElementById("adminMenuBtn");
  const editTournamentBtn = document.getElementById("editTournamentBtn");

  // Показуємо адмін-меню і кнопку редагування тільки для адміна
  if (currentUserId === ADMIN_USER_ID) {
    adminMenuBtn.style.display = 'block';
    editTournamentBtn.style.display = 'inline-block';
  } else {
    adminMenuBtn.style.display = 'none';
    editTournamentBtn.style.display = 'none';
  }


  // Define the admin user ID (already defined, keeping for context if it was defined again)
  // const ADMIN_USER_ID = "5806282517";

  // Existing code for translation dictionary
  const translation_dictionary = {
    "home": {
      "uk": "Головна",
      "en": "Home",
      "ru": "Главная",
      "pl": "Strona Główna"
    },
    "rules": {
      "uk": "Правила",
      "en": "Rules",
      "ru": "Правила",
      "pl": "Zasady"
    },
    "awards": {
      "uk": "Нагороди",
      "en": "Awards",
      "ru": "Награды",
      "pl": "Nagrody"
    },
    "support": {
      "uk": "Підтримка",
      "en": "Support",
      "ru": "Поддержка",
      "pl": "Wsparcie"
    },
    "register": {
      "uk": "Зареєструватись",
      "en": "Register",
      "ru": "Зарегистрироваться",
      "pl": "Zarejestruj się"
    },
    "profile_saved": {
      "uk": "Профіль збережено!",
      "en": "Profile saved!",
      "ru": "Профиль сохранен!",
      "pl": "Profil zapisany!"
    },
    "profile": {
      "uk": "Профіль гравця",
      "en": "Player Profile",
      "ru": "Профиль игрока",
      "pl": "Profil Gracza"
    },
    "standoff_nick": {
      "uk": "Нік в Standoff",
      "en": "Standoff Nick",
      "ru": "Ник в Standoff",
      "pl": "Nick w Standoff"
    },
    "standoff_id": {
      "uk": "ID в Standoff",
      "en": "Standoff ID",
      "ru": "ID в Standoff",
      "pl": "ID w Standoff"
    },
    "tg_user": {
      "uk": "Telegram",
      "en": "Telegram",
      "ru": "Telegram",
      "pl": "Telegram"
    },
    "done": {
      "uk": "Готово",
      "en": "Done",
      "ru": "Готово",
      "pl": "Gotowe"
    },
    "create_team": {
      "uk": "Створити команду",
      "en": "Create Team",
      "ru": "Создать команду",
      "pl": "Stwórz drużynę"
    },
    "team_avatar": {
      "uk": "Аватарка команди",
      "en": "Team Avatar",
      "ru": "Аватар команды",
      "pl": "Awatar drużyny"
    },
    "team_tag": {
      "uk": "Тег команди",
      "en": "Team Tag",
      "ru": "Тег команды",
      "pl": "Tag drużyny"
    },
    "team_tag_ph": {
      "uk": "Тег команди",
      "en": "Team tag",
      "ru": "Тег команды",
      "pl": "Tag drużyny"
    },
    "team_name": {
      "uk": "Назва команди",
      "en": "Team Name",
      "ru": "Название команды",
      "pl": "Nazwa drużyny"
    },
    "team_name_ph": {
      "uk": "Назва команди",
      "en": "Team name",
      "ru": "Название команды",
      "pl": "Nazwa drużyny"
    },
    "main_player1": {
      "uk": "Гравець 1 (капітан)",
      "en": "Player 1 (captain)",
      "ru": "Игрок 1 (капитан)",
      "pl": "Gracz 1 (kapitan)"
    },
    "player_id_ph": {
      "uk": "ID в Standoff 2",
      "en": "Standoff 2 ID",
      "ru": "ID в Standoff 2",
      "pl": "ID w Standoff 2"
    },
    "player_nick_ph": {
      "uk": "Нікнейм",
      "en": "Nickname",
      "ru": "Никнейм",
      "pl": "Pseudonim"
    },
    "player_tg_ph": {
      "uk": "Telegram",
      "en": "Telegram",
      "ru": "Telegram",
      "pl": "Telegram"
    },
    "main_player2": {
      "uk": "Гравець 2 (основний)",
      "en": "Player 2 (main)",
      "ru": "Игрок 2 (основной)",
      "pl": "Gracz 2 (główny)"
    },
    "main_player3": {
      "uk": "Гравець 3 (основний)",
      "en": "Player 3 (main)",
      "ru": "Игрок 3 (основной)",
      "pl": "Gracz 3 (główny)"
    },
    "main_player4": {
      "uk": "Гравець 4 (основний)",
      "en": "Player 4 (main)",
      "ru": "Игрок 4 (основной)",
      "pl": "Gracz 4 (główny)"
    },
    "main_player5": {
      "uk": "Гравець 5 (основний)",
      "en": "Player 5 (main)",
      "ru": "Игрок 5 (основной)",
      "pl": "Gracz 5 (główny)"
    },
    "spare_player1": {
      "uk": "Гравець 6 (запасний)",
      "en": "Player 6 (substitute)",
      "ru": "Игрок 6 (запасной)",
      "pl": "Gracz 6 (rezerwowy)"
    },
    "spare_player2": {
      "uk": "Гравець 7 (запасний)",
      "en": "Player 7 (substitute)",
      "ru": "Игрок 7 (запасной)",
      "pl": "Gracz 7 (rezerwowy)"
    },
    "team_done": {
      "uk": "Готово",
      "en": "Done",
      "ru": "Готово",
      "pl": "Gotowe"
    },
    "team_created": {
      "uk": "Команду створено!",
      "en": "Team created!",
      "ru": "Команда создана!",
      "pl": "Drużyna stworzona!"
    },
    "news": {
      "uk": "Новини",
      "en": "News",
      "ru": "Новости",
      "pl": "Aktualności"
    },
    "news1title": {
      "uk": "🔔 Оновлення",
      "en": "🔔 Update",
      "ru": "🔔 Обновление",
      "pl": "🔔 Aktualizacja"
    },
    "news1desc": {
      "uk": "Ми додали підтримку англійської мови та оновили інтерфейс.",
      "en": "We've added English language support and updated the interface.",
      "ru": "Мы добавили поддержку английского языка и обновили интерфейс.",
      "pl": "Dodaliśmy obsługę języka angielskiego i zaktualizowaliśmy interfejs."
    },
    "news2title": {
      "uk": "🏆 Турніри оновлено",
      "en": "🏆 Tournaments updated",
      "ru": "🏆 Турниры обновлены",
      "pl": "🏆 Turnieje zaktualizowane"
    },
    "news2desc": {
      "uk": "Тепер усі турніри доступні на окремій сторінці.",
      "en": "All tournaments are now available on a separate page.",
      "ru": "Теперь все турниры доступны на отдельной странице.",
      "pl": "Wszystkie turnieje są teraz dostępne na osobnej stronie."
    },
    "disciplines": {
      "uk": "Дисципліни",
      "en": "Disciplines",
      "ru": "Дисциплины",
      "pl": "Dyscypliny"
    },
    "discipline_standoff2": {
        "uk": "Standoff 2",
        "en": "Standoff 2",
        "ru": "Standoff 2",
        "pl": "Standoff 2"
    },
    "tournaments": {
      "uk": "Турніри",
      "en": "Tournaments",
      "ru": "Турниры",
      "pl": "Turnieje"
    },
    "tournament_name_grand_prix": {
        "uk": "RFORZ Grand Prix",
        "en": "RFORZ Grand Prix",
        "ru": "RFORZ Grand Prix",
        "pl": "RFORZ Grand Prix"
    },
    "tournament1desc": {
      "uk": "Старт: 1 липня. Призовий фонд: 5000₴",
      "en": "Start: July 1. Prize pool: 5000₴",
      "ru": "Старт: 1 июля. Призовой фонд: 5000₴",
      "pl": "Start: 1 lipca. Pula nagród: 5000₴"
    },
    "rules_main_title": {
      "uk": "Правила турніру",
      "en": "Tournament Rules",
      "ru": "Правила турнира",
      "pl": "Zasady turnieju"
    },
    "rules_1v1_summary": {
      "uk": "Турніри 1х1",
      "en": "1v1 Tournaments",
      "ru": "Турниры 1х1",
      "pl": "Turnieje 1 na 1"
    },
    "rules_1v1_text": {
      "uk": "• Гравці грають один проти одного.<br/> • Раунди проходять до 3 перемог.<br/> • Перемагає той, хто перший виграє 3 раунди.",
      "en": "• Players play against each other.<br/> • Rounds are played until 3 wins.<br/> • The one who first wins 3 rounds wins.",
      "ru": "• Игроки играют один против друга.<br/> • Раунды проводятся до 3 побед.<br/> • Выигрывает тот, кто первый выиграет 3 раунда.",
      "pl": "• Gracze grają przeciwko sobie.<br/> • Rundy są rozgrywane do 3 zwycięstw.<br/> • Wygrywa ten, kto jako pierwszy zdobędzie 3 rundy."
    },
    "rules_2v2_summary": {
      "uk": "Турніри 2х2",
      "en": "2v2 Tournaments",
      "ru": "Турниры 2х2",
      "pl": "Turnieje 2 na 2"
    },
    "rules_2v2_text": {
      "uk": "• Команди по 2 гравці.<br/> • Успіх залежить від координації та злагодженої гри.<br/> • Перші до 5 перемог — проходять далі.<br/> • Якщо рахунок 5-5, грається додатковий раунд.",
      "en": "• Teams of 2 players.<br/> • Success depends on coordination and teamwork.<br/> • First to 5 wins — proceeds.<br/> • If the score is 5-5, an additional round is played.",
      "ru": "• Команды по 2 игрока.<br/> • Успех зависит от координации и слаженной игры.<br/> • Первые до 5 побед — проходят дальше.<br/> • Если счет 5-5, играется дополнительный раунд.",
      "pl": "• Drużyny 2-osobowe.<br/> • Sukces zależy od koordynacji i zgranej gry.<br/> • Pierwszy do 5 zwycięstw – przechodzi dalej.<br/> • Jeśli wynik to 5-5, rozgrywana jest dodatkowa runda."
    },
    "rules_5v5_standoff_summary": {
      "uk": "Турніри 5х5",
      "en": "5v5 Tournaments",
      "ru": "Турниры 5х5",
      "pl": "Turnieje 5 na 5"
    },
    "rules_5v5_standoff_text": {
      "uk": "• Команди по 5 гравців.<br/> • Грають 10 раундів.<br/> • Перемагає команда, що набрала більше раундів.<br/> • Якщо рахунок 5-5, грається додатковий раунд.",
      "en": "• Teams of 5 players.<br/> • Play 10 rounds.<br/> • The team with more rounds wins.<br/> • If the score is 5-5, an additional round is played.",
      "ru": "• Команды по 5 игроков.<br/> • Играют 10 раундов.<br/> • Выигрывает команда, набравшая больше раундов.<br/> • Если счет 5-5, играется дополнительный раунд.",
      "pl": "• Drużyny 5-osobowe.<br/> • Rozgrywają 10 rund.<br/> • Wygrywa drużyna, która zdobyła więcej rund.<br/> • Jeśli wynik to 5-5, rozgrywana jest dodatkowa runda."
    },
    "awards_title": {
      "uk": "Нагороди",
      "en": "Awards",
      "ru": "Награды",
      "pl": "Nagrody"
    },
    "admin_menu_title": {
        "uk": "Адмін-меню",
        "en": "Admin Menu",
        "ru": "Админ-меню",
        "pl": "Menu Administratora"
    },
    "create_tournament_btn": {
      "uk": "➕ Створити турнір",
      "en": "➕ Create Tournament",
      "ru": "➕ Создать турнир",
      "pl": "➕ Stwórz turniej"
    },
    "ban_user": {
      "uk": "🚫 Заблокувати користувача",
      "en": "🚫 Ban User",
      "ru": "🚫 Заблокировать пользователя",
      "pl": "🚫 Zablokuj użytkownika"
    },
    "unban_user": {
      "uk": "✅ Розблокувати користувача",
      "en": "✅ Unban User",
      "ru": "✅ Разблокировать пользователя",
      "pl": "✅ Odblokuj użytkownika"
    },
    "give_prize": {
      "uk": "🏆 Видати приз",
      "en": "🏆 Give Prize",
      "ru": "🏆 Выдать приз",
      "pl": "🏆 Przyznaj nagrodę"
    },
    "disqualify_team": {
      "uk": "❌ Дискваліфікувати команду",
      "en": "❌ Disqualify Team",
      "ru": "❌ Дисквалифицировать команду",
      "pl": "❌ Zdyskwalifikuj drużynę"
    },
    "notification_title": {
        "uk": "Сповіщення",
        "en": "Notifications",
        "ru": "Уведомления",
        "pl": "Powiadomienia"
    },
    "clear_notifications_btn": {
        "uk": "Очистити",
        "en": "Clear",
        "ru": "Очистить",
        "pl": "Wyczyść"
    },
    "create_tournament_modal_title": {
        "uk": "Створити Турнір",
        "en": "Create Tournament",
        "ru": "Создать Турнир",
        "pl": "Stwórz Turniej"
    },
    "tournament_name_label": {
        "uk": "Назва Турніру",
        "en": "Tournament Name",
        "ru": "Название Турнира",
        "pl": "Nazwa Turnieju"
    },
    "tournament_discipline_label": {
        "uk": "Дисципліна",
        "en": "Discipline",
        "ru": "Дисциплина",
        "pl": "Dyscyplina"
    },
    "tournament_format_label": {
        "uk": "Формат",
        "en": "Format",
        "ru": "Формат",
        "pl": "Format"
    },
    "start_date_label": {
        "uk": "Дата початку",
        "en": "Start Date",
        "ru": "Дата начала",
        "pl": "Data rozpoczęcia"
    },
    "end_date_label": {
        "uk": "Дата закінчення",
        "en": "End Date",
        "ru": "Дата окончания",
        "pl": "Data zakończenia"
    },
    "prize_pool_label": {
        "uk": "Призовий Фонд",
        "en": "Prize Pool",
        "ru": "Призовой Фонд",
        "pl": "Pula Nagród"
    },
    "description_label": {
        "uk": "Опис",
        "en": "Description",
        "ru": "Описание",
        "pl": "Opis"
    },
    "create_btn_submit": {
        "uk": "Створити",
        "en": "Create",
        "ru": "Создать",
        "pl": "Stwórz"
    },
    "tournament_view_title": {
        "uk": "Перегляд Турніру",
        "en": "Tournament View",
        "ru": "Просмотр Турнира",
        "pl": "Widok Turnieju"
    },
    "back_to_home": {
        "uk": "← Головна",
        "en": "← Home",
        "ru": "← Главная",
        "pl": "← Strona Główna"
    },
    "edit_tournament_btn": {
        "uk": "✏️ Редагувати турнір",
        "en": "✏️ Edit Tournament",
        "ru": "✏️ Редактировать турнир",
        "pl": "✏️ Edytuj turniej"
    },
    "group_stage_tab": {
        "uk": "Груповий етап",
        "en": "Group Stage",
        "ru": "Групповой этап",
        "pl": "Faza Grupowa"
    },
    "playoffs_tab": {
        "uk": "Плей-офф",
        "en": "Playoffs",
        "ru": "Плей-офф",
        "pl": "Faza Pucharowa"
    },
    "group_a_title": {
        "uk": "Група A",
        "en": "Group A",
        "ru": "Группа A",
        "pl": "Grupa A"
    },
    "team_column": {
        "uk": "Команда",
        "en": "Team",
        "ru": "Команда",
        "pl": "Drużyna"
    },
    "wins_column": {
        "uk": "Перемоги",
        "en": "Wins",
        "ru": "Победы",
        "pl": "Zwycięstwa"
    },
    "losses_column": {
        "uk": "Поразки",
        "en": "Losses",
        "ru": "Поражения",
        "pl": "Porażki"
    },
    "group_b_title": {
        "uk": "Група B",
        "en": "Group B",
        "ru": "Группа B",
        "pl": "Grupa B"
    },
    "playoffs_title": {
        "uk": "Плей-офф",
        "en": "Playoffs",
        "ru": "Плей-офф",
        "pl": "Faza Pucharowa"
    },
    "playoff_bracket_text": {
        "uk": "Тут буде сітка плей-офф.",
        "en": "Playoff bracket will be here.",
        "ru": "Здесь будет сетка плей-офф.",
        "pl": "Tutaj będzie drabinka play-off."
    },
    "edit_tournament_admin_title": {
        "uk": "Редагування Турніру",
        "en": "Edit Tournament",
        "ru": "Редактирование Турнира",
        "pl": "Edycja Turnieju"
    },
    "add_team_btn": {
        "uk": "Додати команду",
        "en": "Add Team",
        "ru": "Добавить команду",
        "pl": "Dodaj drużynę"
    },
    "remove_team_btn": {
        "uk": "Видалити команду",
        "en": "Remove Team",
        "ru": "Удалить команду",
        "pl": "Usuń drużynę"
    },
    "update_scores_btn": {
        "uk": "Оновити рахунки",
        "en": "Update Scores",
        "ru": "Обновить счета",
        "pl": "Zaktualizuj wyniki"
    },
    "add_team_to_group_title": {
        "uk": "Додати команду до групи",
        "en": "Add team to group",
        "ru": "Добавить команду в группу",
        "pl": "Dodaj drużynę do grupy"
    },
    "group_a_option": {
        "uk": "Група A",
        "en": "Group A",
        "ru": "Группа A",
        "pl": "Grupa A"
    },
    "group_b_option": {
        "uk": "Група B",
        "en": "Group B",
        "ru": "Группа B",
        "pl": "Grupa B"
    },
    "add_btn_submit": {
        "uk": "Додати",
        "en": "Add",
        "ru": "Добавить",
        "pl": "Dodaj"
    },
    "remove_team_title": {
        "uk": "Видалити команду",
        "en": "Remove Team",
        "ru": "Удалить команду",
        "pl": "Usuń drużynę"
    },
    "remove_btn_submit": {
        "uk": "Видалити",
        "en": "Remove",
        "ru": "Удалить",
        "pl": "Usuń"
    },
    "tournament_groups_admin_title": {
        "uk": "Групи Турніру (Адмін)",
        "en": "Tournament Groups (Admin)",
        "ru": "Группы Турнира (Админ)",
        "pl": "Grupy Turnieju (Admin)"
    },
    "action_column": {
        "uk": "Дія",
        "en": "Action",
        "ru": "Действие",
        "pl": "Działanie"
    },
    "back_to_awards": {
        "uk": "← Нагороди",
        "en": "← Awards",
        "ru": "← Награды",
        "pl": "← Nagrody"
    },
    "back_to_tournaments": {
        "uk": "← Турніри",
        "en": "← Tournaments",
        "ru": "← Турниры",
        "pl": "← Turnieje"
    },
    "tournament_details_title": {
        "uk": "Деталі Турніру",
        "en": "Tournament Details",
        "ru": "Детали Турнира",
        "pl": "Szczegóły Turnieju"
    },
    "tournament_details_desc": {
        "uk": "Це опис турніру",
        "en": "This is a description of the tournament",
        "ru": "Это описание турнира",
        "pl": "To jest opis turnieju"
    },
    "ranking_title": {
        "uk": "Рейтинг",
        "en": "Ranking",
        "ru": "Рейтинг",
        "pl": "Ranking"
    },
    "place_column": {
        "uk": "Місце",
        "en": "Place",
        "ru": "Место",
        "pl": "Miejsce"
    },
    "points_column": {
        "uk": "Очки",
        "en": "Points",
        "ru": "Очки",
        "pl": "Punkty"
    },
    "participate_btn": {
        "uk": "Взяти участь",
        "en": "Participate",
        "ru": "Принять участие",
        "pl": "Weź udział"
    },
    "support_title": {
        "uk": "Підтримка",
        "en": "Support",
        "ru": "Поддержка",
        "pl": "Wsparcie"
    },
    "support_text": {
        "uk": "Якщо у вас виникли питання або проблеми, будь ласка, зв'яжіться з нашою службою підтримки.",
        "en": "If you have any questions or issues, please contact our support team.",
        "ru": "Если у вас возникли вопросы или проблемы, пожалуйста, свяжитесь с нашей службой поддержки.",
        "pl": "Jeśli masz pytania lub problemy, skontaktuj się z naszym zespołem wsparcia."
    },
    "support_contact_info": {
        "uk": "Ви можете зв'язатися з нами через Telegram:",
        "en": "You can contact us via Telegram:",
        "ru": "Вы можете связаться с нами через Telegram:",
        "pl": "Możesz skontaktować się z nami przez Telegram:"
    }
  };

  // Навігація футера
  navItems.forEach(item => {
    item.addEventListener("click", () => {
      const targetId = item.id.replace("Nav", "Section");
      sections.forEach(s => s.classList.remove("active"));
      navItems.forEach(n => n.classList.remove("active"));
      document.getElementById(targetId)?.classList.add("active");
      item.classList.add("active");
    });
  });

  // Попапи
  const langBtn = document.getElementById("langBtn");
  const langPopup = document.getElementById("langPopup");
  langBtn?.addEventListener("click", (event) => {
    event.stopPropagation(); // Prevent immediate closing by document click
    langPopup.classList.toggle("active");
    notificationPopup?.classList.remove("active"); // Close other popups
    adminPopup?.classList.remove("active");
  });

  const avatar = document.getElementById("avatar");
  const profileModal = document.getElementById("profileModal");
  const closeProfileModalBtn = document.getElementById("closeProfileModalBtn");
  avatar?.addEventListener("click", (event) => {
    event.stopPropagation(); // Prevent immediate closing by document click
    profileModal?.classList.add("active");
    langPopup?.classList.remove("active"); // Close other popups
    notificationPopup?.classList.remove("active");
    adminPopup?.classList.remove("active");
  });
  closeProfileModalBtn?.addEventListener("click", () => {
    profileModal?.classList.remove("active");
  });

  const notificationBtn = document.getElementById("notificationBtn");
  const notificationPopup = document.getElementById("notificationPopup");
  notificationBtn?.addEventListener("click", (event) => {
    event.stopPropagation(); // Prevent immediate closing by document click
    notificationPopup?.classList.toggle("active");
    langPopup?.classList.remove("active"); // Close other popups
    adminPopup?.classList.remove("active");
  });


  const adminPopup = document.getElementById("adminPopup");
  const userTournamentView = document.getElementById("userTournamentView");
  const adminTournamentView = document.getElementById("adminTournamentView");


  adminMenuBtn?.addEventListener("click", (event) => {
    event.stopPropagation(); // Prevent immediate closing by document click
    adminPopup?.classList.toggle("active");
    langPopup?.classList.remove("active"); // Close other popups
    notificationPopup?.classList.remove("active");
  });

  // Toggle admin view on editTournamentBtn click
  editTournamentBtn?.addEventListener("click", () => {
      if (userTournamentView && adminTournamentView) {
          userTournamentView.style.display = 'none';
          adminTournamentView.style.display = 'block';
      }
  });

  // Show user view when leaving admin view (e.g., clicking back button)
  document.getElementById('backToHomeFromTournamentView')?.addEventListener('click', () => {
      if (userTournamentView && adminTournamentView) {
          userTournamentView.style.display = 'block'; // Or 'flex' depending on original display
          adminTournamentView.style.display = 'none';
      }
  });


  // Initial visibility check for admin elements
  if (currentUserId === ADMIN_USER_ID) {
    adminMenuBtn.style.display = 'block';
    editTournamentBtn.style.display = 'inline-block'; // Or 'block' based on preferred layout
  } else {
    adminMenuBtn.style.display = 'none';
    editTournamentBtn.style.display = 'none';
  }

  // Нова логіка для кнопки "Зареєструватись"
  const registerBtn = document.getElementById("registerBtn");
  const profileForm = document.getElementById("profileForm");
  const playerProfile = document.getElementById("playerProfile");
  const createTeamBtn = document.getElementById("createTeamBtn");
  const successMsg = document.getElementById("successMsg");

  registerBtn?.addEventListener("click", () => {
    registerBtn.style.display = "none";
    profileForm.style.display = "flex";
    if (playerProfile) playerProfile.style.display = "none";
    if (createTeamBtn) createTeamBtn.style.display = "none";
    if (successMsg) successMsg.style.display = "none";
  });

  // Логіка для відкриття модального вікна створення турніру
  const createTournamentAdminBtn = document.getElementById("createTournamentAdminBtn");
  const createTournamentModal = document.getElementById("createTournamentModal");
  const closeTournamentModalBtn = document.getElementById("closeTournamentModalBtn");

  createTournamentAdminBtn?.addEventListener("click", (event) => {
      event.stopPropagation(); // Prevent propagation to document click handler immediately
      createTournamentModal?.classList.add("active");
      adminPopup?.classList.remove("active"); // Optionally close admin popup when opening modal
  });

  closeTournamentModalBtn?.addEventListener("click", () => {
      createTournamentModal?.classList.remove("active");
  });

  // Закриття попапів/модальних вікон по кліку за межами
  document.addEventListener("click", function(event) {
    // Popups (langPopup, notificationPopup, adminPopup)
    const popupsToClose = [
      { element: langPopup, trigger: langBtn },
      { element: notificationPopup, trigger: notificationBtn },
      { element: adminPopup, trigger: adminMenuBtn }
    ];

    popupsToClose.forEach(item => {
      if (item.element && item.element.classList.contains("active") &&
          !item.element.contains(event.target) &&
          !(item.trigger && item.trigger.contains(event.target))) {
        item.element.classList.remove("active");
      }
    });

    // Modals (profileModal, createTournamentModal) - close only if clicking on the overlay
    const modalsToClose = [profileModal, createTournamentModal];
    modalsToClose.forEach(modal => {
      if (modal && modal.classList.contains("active") && event.target === modal) {
        modal.classList.remove("active");
      }
    });
  });

  // Функція для застосування перекладу
  function applyLanguage(lang) {
    document.querySelectorAll("[data-i18n]").forEach(element => {
      const key = element.getAttribute("data-i18n");
      if (translation_dictionary[key] && translation_dictionary[key][lang]) {
        if (element.tagName === 'INPUT' && element.hasAttribute('data-i18n-placeholder')) {
            element.placeholder = translation_dictionary[key][lang];
        } else {
            element.innerHTML = translation_dictionary[key][lang];
        }
      }
    });
    localStorage.setItem("language", lang);
  }

  // Обробники для кнопок мов
  const langOptions = document.querySelectorAll(".lang-option");
  langOptions.forEach(option => {
    option.addEventListener("click", () => {
      applyLanguage(option.dataset.lang);
      document.getElementById("langPopup").classList.remove("active");
    });
  });


  // Логіка для вкладок турніру (Group Stage / Playoffs)
  const tournamentTabs = document.querySelectorAll(".tournament-tab");
  const tournamentTabContents = document.querySelectorAll(".tournament-tab-content");

  tournamentTabs.forEach(tab => {
      tab.addEventListener("click", () => {
          // Remove active class from all tabs and content
          tournamentTabs.forEach(t => t.classList.remove("active"));
          tournamentTabContents.forEach(c => c.classList.remove("active"));

          // Add active class to clicked tab and its corresponding content
          tab.classList.add("active");
          const targetTabContentId = tab.dataset.tab + "Content";
          document.getElementById(targetTabContentId)?.classList.add("active");
      });
  });


  // Застосувати дефолтну мову при завантаженні сторінки
  const currentLanguage = localStorage.getItem("language") || "uk";
  applyLanguage(currentLanguage);

  // Ensure home section is shown on load
  showSection('homeSection');
});

// Функція для показу секції (з попереднього коду)
function showSection(sectionId) {
    const sections = document.querySelectorAll(".section");
    sections.forEach(s => s.classList.remove("active"));
    document.getElementById(sectionId)?.classList.add("active");

    const navItems = document.querySelectorAll(".nav-item");
    navItems.forEach(n => n.classList.remove("active"));
    const correspondingNavItem = document.getElementById(sectionId.replace("Section", "Nav"));
    if (correspondingNavItem) {
        correspondingNavItem.classList.add("active");
    }
}

// Функція для завантаження деталей турніру, оновлена для підтримки перекладу
function loadTournamentDetails(name) {
  showSection('tournamentViewSection'); // Changed to tournamentViewSection as per new structure

  document.getElementById('tournamentDetailsTitle').textContent = name;
  const currentLang = localStorage.getItem("language") || "uk";
  const translation_dictionary = { // Re-define or pass the dictionary if not global
    "tournament_details_desc": {
        "uk": "Це опис турніру",
        "en": "This is a description of the tournament",
        "ru": "Это описание турнира",
        "pl": "To jest opis turnieju"
    }
  };
  document.getElementById('tournamentDetailsDescription').textContent =
      (translation_dictionary["tournament_details_desc"] && translation_dictionary["tournament_details_desc"][currentLang]) ?
      translation_dictionary["tournament_details_desc"][currentLang] + " " + name + "." :
      "Це опис турніру " + name + "."; // Fallback

  const rankingBody = document.getElementById('tournamentRankingBody');
  rankingBody.innerHTML = `
    <tr><td>1</td><td>Команда Alpha</td><td>9</td></tr>
    <tr><td>2</td><td>Команда Beta</td><td>6</td></tr>
    <tr><td>3</td><td>Команда Gamma</td><td>3</td></tr>
  `;
}
</script>
</body>
</html>
